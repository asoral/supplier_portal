var S=(B,m,d)=>new Promise((v,_)=>{var p=u=>{try{c(d.next(u))}catch(h){_(h)}},f=u=>{try{c(d.throw(u))}catch(h){_(h)}},c=u=>u.done?v(u.value):Promise.resolve(u.value).then(p,f);c((d=d.apply(B,m)).next())});import{m as b,B as w,A as O,l as F,y as R,p as j,a as i,b as e,e as g,f as x,u as a,t as l,g as q,F as C,r as T,q as E,v as M,o as r,n as k,h as G,i as U,k as z}from"./index-CRwOK9IK.js";import{t as J}from"./mosha-vue-toastify.es-CumxvRMf.js";/* empty css              */import{C as A}from"./clock-CXK36Yz5.js";import{A as P}from"./arrow-right-BwZsedOv.js";import{S as V}from"./search-DyVTcKdV.js";import{T as Q}from"./trash-2-PT0ge1zZ.js";import{E as H}from"./eye-D0PXKh9n.js";const I={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8"},K={class:"flex items-center justify-between mb-8"},W={class:"text-3xl font-bold tracking-tight text-gray-900 flex items-center gap-2"},X={class:"mt-1 text-sm text-gray-500"},Y={class:"grid grid-cols-1 gap-4 sm:grid-cols-4 mb-8"},Z={class:"truncate text-sm font-medium text-gray-500"},ee={class:"mt-1 text-2xl font-semibold tracking-tight text-gray-900"},te={class:"flex flex-col sm:flex-row gap-4 mb-6 items-center"},se={class:"relative flex-grow w-full sm:w-auto"},oe={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},ae={class:"flex space-x-2 bg-gray-100 p-1 rounded-lg"},ne=["onClick"],le={key:0,class:"text-center py-12"},re={key:1,class:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200"},ie={class:"mt-6"},de={key:2,class:"space-y-4"},ce={class:"flex flex-col sm:flex-row justify-between gap-4"},ue={class:"flex-grow"},ge={class:"flex items-center gap-2 mb-1"},me=["onClick"],ve={class:"text-sm text-gray-500 mb-3"},xe={class:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600"},pe={class:"flex items-center gap-1 font-semibold text-gray-900"},fe={class:"flex items-center gap-1"},he={key:0,class:"text-red-600 text-xs font-medium flex items-center px-2 py-0.5 bg-red-50 rounded"},ye={class:"text-xs text-gray-400 mt-3 font-medium"},be={class:"flex items-center gap-3 self-start sm:self-center"},_e={class:"p-2 bg-indigo-50 rounded-md",title:"Tender is saved"},we=["onClick"],ke=["onClick"],Se=["onClick"],Oe={__name:"SavedTenders",setup(B){const m=q(),d=b([]),v=b("All"),_=["All","Active","Closed"],p=b(""),f=b(!0),c=b([{name:"Total Saved",value:"0",icon:w,color:"text-indigo-600",bg:"bg-indigo-50"},{name:"Active",value:"0",icon:A,color:"text-green-600",bg:"bg-green-50"},{name:"Closing Soon",value:"0",icon:A,color:"text-orange-600",bg:"bg-orange-50"},{name:"Alerts On",value:"0",icon:O,color:"text-blue-600",bg:"bg-blue-50"}]),u=()=>{d.value&&(c.value[0].value=d.value.length.toString(),c.value[1].value=d.value.filter(n=>n.status==="Active").length.toString(),c.value[2].value=d.value.filter(n=>n.status==="Active").length.toString(),c.value[3].value="0")},h=F(),{secureFetch:D}=h,N=()=>S(this,null,function*(){f.value=!0;try{const t=(yield(yield D("/api/method/supplier_portal.api.get_saved_tenders",{method:"GET"})).json()).message||[];d.value=t.map(o=>({saved_id:o.saved_id,id:o.rfq_id||o.rfq||o.id,title:o.title||"Untitled Tender",status:o.status||"Active",category:o.category||"General",value:o.value||o.total_budget||0,deadline:o.deadline||"N/A",deadlineStatus:o.deadlineStatus,savedOn:o.savedOn||"Recently",liveBidding:o.liveBidding})),u()}catch(n){console.error("Fetch failed:",n)}finally{f.value=!1}}),$=n=>S(this,null,function*(){if(n&&confirm("Remove this tender from your saved list?"))try{(yield D("/api/method/supplier_portal.api.delete_saved_tender",{method:"POST",body:JSON.stringify({saved_id:n})})).ok&&(J("Tender removed",{type:"success"}),yield N())}catch(s){console.error("Delete error:",s)}}),L=R(()=>{const n=(p.value||"").toLowerCase();return(d.value||[]).filter(s=>{const o=(s.title||"").toLowerCase().includes(n)||s.id.toLowerCase().includes(n),y=v.value==="All"||s.status===v.value;return o&&y})});return j(()=>{N()}),(n,s)=>(r(),i("div",I,[e("div",K,[e("div",null,[e("h1",W,[g(a(w),{class:"h-8 w-8 text-indigo-600 fill-indigo-600"}),s[3]||(s[3]=x(" Saved Tenders ",-1))]),e("p",X,l(c.value[0].value)+" tenders saved • "+l(c.value[1].value)+" active ",1)]),e("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 flex items-center gap-2 transition-colors",onClick:s[0]||(s[0]=t=>a(m).push("/tenders"))},[s[4]||(s[4]=x(" Browse More Tenders ",-1)),g(a(P),{class:"h-4 w-4"})])]),e("div",Y,[(r(!0),i(C,null,T(c.value,t=>(r(),i("div",{key:t.name,class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow-sm border border-gray-100 flex items-center gap-4"},[e("div",{class:k([t.bg,"rounded-md p-3"])},[(r(),G(U(t.icon),{class:k([t.color,"h-6 w-6"])},null,8,["class"]))],2),e("div",null,[e("dt",Z,l(t.name),1),e("dd",ee,l(t.value),1)])]))),128))]),e("div",te,[e("div",se,[e("div",oe,[g(a(V),{class:"h-4 w-4 text-gray-400"})]),E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),type:"text",class:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Search saved tenders..."},null,512),[[M,p.value]])]),e("div",ae,[(r(),i(C,null,T(_,t=>e("button",{key:t,onClick:o=>v.value=t,class:k([v.value===t?"bg-white text-gray-900 shadow":"text-gray-500 hover:text-gray-900","rounded-md px-3 py-1.5 text-sm font-medium transition-all"])},l(t),11,ne)),64))])]),f.value?(r(),i("div",le,[...s[5]||(s[5]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-500 font-medium"},"Loading saved tenders...",-1)])])):L.value.length===0?(r(),i("div",re,[g(a(w),{class:"mx-auto h-12 w-12 text-gray-300"}),s[7]||(s[7]=e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No saved tenders found",-1)),s[8]||(s[8]=e("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your search or browse new tenders.",-1)),e("div",ie,[e("button",{onClick:s[2]||(s[2]=t=>a(m).push("/tenders")),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},[g(a(V),{class:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),s[6]||(s[6]=x(" Find Tenders ",-1))])])])):(r(),i("div",de,[(r(!0),i(C,null,T(L.value,t=>{var o;return r(),i("div",{key:t.id,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-all"},[e("div",ce,[e("div",ue,[e("div",ge,[e("h3",{class:"text-base font-semibold text-gray-900 hover:text-indigo-600 cursor-pointer",onClick:y=>a(m).push({name:"TenderDetail",params:{id:t.id}})},l(t.title),9,me),e("span",{class:k(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset",t.status==="Active"?"bg-blue-50 text-blue-700 ring-blue-700/10":t.status==="Closing Soon"?"bg-orange-50 text-orange-700 ring-orange-600/20":"bg-gray-50 text-gray-600 ring-gray-500/10"])},l(t.status),3)]),e("p",ve,l(t.id)+" • "+l(t.category),1),e("div",xe,[e("span",pe," ₹"+l(((o=t.value)==null?void 0:o.toLocaleString("en-IN"))||"0"),1),e("span",fe,[g(a(A),{class:"h-4 w-4 text-gray-400"}),x(" "+l(t.deadline),1)]),t.deadlineStatus?(r(),i("span",he,l(t.deadlineStatus),1)):z("",!0)]),e("p",ye,"Saved on "+l(t.savedOn),1)]),e("div",be,[e("div",_e,[g(a(w),{class:"h-4 w-4 text-indigo-600 fill-indigo-600"})]),e("button",{onClick:y=>$(t.saved_id),class:"p-2 text-gray-400 hover:text-red-600 bg-gray-50 rounded-md hover:bg-red-50 transition-colors",title:"Remove from Saved"},[g(a(Q),{class:"h-4 w-4"})],8,we),t.liveBidding?(r(),i("button",{key:0,onClick:y=>a(m).push({name:"TenderDetail",params:{id:t.id}}),class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 transition-colors flex items-center gap-1"},[...s[9]||(s[9]=[e("span",{class:"relative flex h-2 w-2 mr-1"},[e("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),e("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})],-1),x(" View & Bid ",-1)])],8,ke)):(r(),i("button",{key:1,onClick:y=>a(m).push({name:"TenderDetail",params:{id:t.id}}),class:"inline-flex items-center gap-1 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},[g(a(H),{class:"h-4 w-4"}),s[10]||(s[10]=x(" View Details ",-1))],8,Se))])])])}),128))]))]))}};export{Oe as default};
//# sourceMappingURL=SavedTenders-Ds8KUbiA.js.map
