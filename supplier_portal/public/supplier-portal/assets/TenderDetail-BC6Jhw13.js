var _=(Q,C,k)=>new Promise((f,D)=>{var E=S=>{try{L(k.next(S))}catch(B){D(B)}},M=S=>{try{L(k.throw(S))}catch(B){D(B)}},L=S=>S.done?f(S.value):Promise.resolve(S.value).then(E,M);L((k=k.apply(Q,C)).next())});import{c as R,r as h,p as De,y as N,w as Be,o as Se,z as Ce,a as i,b as t,e as u,u as c,g as Me,f as v,i as x,t as l,n as A,B as K,F as j,h as F,d as ee,m as te,M as se,q as Le,v as Te,x as oe,C as Ne,j as d}from"./index-AcRIRNr0.js";import{t as w}from"./mosha-vue-toastify.es-sGRxnPSJ.js";import{C as re}from"./circle-user-DICY562u.js";import{C as ae}from"./circle-alert-DlcU3YOu.js";import{C as ne}from"./calendar-6D72fvYH.js";import{M as Ae}from"./map-pin-CZVP06lQ.js";import{P as je}from"./printer-ww8XJvrG.js";import{C as qe}from"./clock-B0X53Fpq.js";import{B as Ie}from"./building-2-Nx0H2afw.js";import{Z as Fe}from"./zap-Bje5imQ_.js";import{D as U}from"./download-DFJ2ePG1.js";import{A as Re}from"./arrow-right-DlcDNpXn.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=R("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=R("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=R("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=R("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=R("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=R("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Oe={class:"min-h-screen bg-gray-50 pb-12"},ze={key:0,class:"flex items-center justify-center min-h-[60vh]"},He={key:1,class:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4"},Ve={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4"},Ue={key:3},Qe={class:"bg-white border-b border-gray-200"},Je={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Ye={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},Ze={class:"flex flex-wrap gap-2 mb-3"},Xe={class:"inline-flex items-center rounded-md bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-600"},We={class:"inline-flex items-center rounded-md bg-indigo-50 px-2.5 py-0.5 text-xs font-medium text-indigo-700 border border-indigo-100"},Ge={key:0,class:"inline-flex items-center rounded-md bg-orange-50 px-2.5 py-0.5 text-xs font-medium text-orange-700 border border-orange-100"},Ke={class:"text-2xl font-bold text-gray-900 mb-2"},et={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},tt={class:"flex items-center gap-1"},st={class:"flex items-center gap-1"},ot={class:"flex items-center gap-1"},rt={class:"flex gap-2"},at={class:"text-sm font-semibold"},nt={class:"flex gap-6 mt-8 border-b border-gray-100"},it=["onClick"],lt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dt={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ct={class:"lg:col-span-2 space-y-6"},ut={key:0,class:"space-y-6"},gt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},mt=["innerHTML"],pt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},vt={class:"p-4 bg-blue-50 rounded-lg border border-blue-100 flex items-center gap-3"},xt={class:"p-2 bg-blue-100 rounded-lg text-blue-600"},bt={class:"text-sm font-bold text-gray-900"},yt={class:"p-4 bg-green-50 rounded-lg border border-green-100 flex items-center gap-3"},ht={class:"p-2 bg-green-100 rounded-lg text-green-600"},ft={class:"text-sm font-bold text-gray-900"},_t={class:"p-4 bg-orange-50 rounded-lg border border-orange-100 flex items-center gap-3"},wt={class:"p-2 bg-orange-100 rounded-lg text-orange-600"},kt={class:"text-sm font-bold text-gray-900"},Dt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Bt=["innerHTML"],St={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Ct={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Mt={class:"space-y-3"},Lt=["onClick"],Tt={class:"text-sm font-bold text-gray-900 group-hover:text-green-600 transition-colors"},Nt={class:"text-xs text-gray-500 mt-1"},At={key:1,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},jt={class:"space-y-4"},qt={key:0,class:"text-gray-500 italic"},It={class:"flex-grow"},Ft={class:"text-sm font-semibold text-gray-900 block"},Rt=["innerHTML"],Et={class:"mt-2 flex gap-4 text-xs font-medium text-gray-700 items-center"},Pt={class:"bg-white px-2 py-1 rounded border border-gray-200"},$t={key:0,class:"bg-white px-2 py-1 rounded border border-gray-200"},Ot=["href"],zt={key:2,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Ht={class:"space-y-3"},Vt={key:0,class:"text-gray-500 italic"},Ut={class:"flex items-center gap-4"},Qt={class:"p-2 bg-red-50 rounded-lg text-red-500"},Jt={class:"font-medium text-gray-900 group-hover:text-indigo-700"},Yt={class:"text-xs text-gray-500"},Zt=["href"],Xt={key:3,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Wt={class:"relative pl-4"},Gt={key:0,class:"w-2.5 h-2.5 rounded-full bg-indigo-600"},Kt={class:"flex-grow pt-0.5"},es={class:"text-sm font-bold text-gray-900"},ts={class:"text-xs text-gray-500 mt-1"},ss={key:0,class:"text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded self-start"},os={class:"lg:col-span-1 space-y-6"},rs={class:"bg-white rounded-xl border border-gray-200 px-6 py-6 shadow-sm relative overflow-hidden"},as={class:"grid grid-cols-2 gap-y-4 gap-x-2 text-sm mb-6"},ns={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},is={class:"font-bold text-gray-900"},ls={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},ds={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},cs={class:"font-bold text-gray-900"},us={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},gs={class:"font-bold text-gray-900"},ms={class:"pt-4 border-t border-gray-100 mb-6 space-y-3"},ps={class:"flex justify-between items-center"},vs={class:"flex items-center gap-2 text-sm text-gray-500"},xs={class:"text-sm font-bold text-gray-900"},bs={class:"flex justify-between items-center"},ys={class:"flex items-center gap-2 text-sm text-gray-500"},hs={class:"text-sm font-bold text-gray-900"},fs={class:"flex items-center gap-2 mb-3"},_s={key:0},ws=["href"],ks={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm ring-1 ring-gray-200"},Ds={class:"text-center py-6 bg-white rounded-xl border-2 border-green-500/20 mb-6 shadow-[0_0_15px_rgba(34,197,94,0.1)]"},Bs={class:"text-3xl font-bold text-green-600 tracking-tight"},Ss={key:0,class:"text-xs font-medium text-green-600 mt-1 flex items-center justify-center gap-1"},Cs={class:"mb-4"},Ms={class:"flex gap-2 mb-3"},Ls={class:"relative flex-grow"},Ts=["disabled"],Ns={key:0},As={class:"min-h-[20px] mb-3"},js={key:0,class:"text-[11px] text-red-600 font-bold px-1 flex items-center gap-1"},qs=["disabled"],Is={class:"mt-6"},Fs={key:0,class:"text-center py-4 text-xs text-gray-400 italic"},Rs={class:"flex flex-col"},Es={class:"text-[10px] text-gray-400"},Ps={class:"text-right"},$s={key:0,class:"text-[10px] font-bold text-green-500 uppercase"},Os={class:"bg-indigo-900 rounded-xl p-6 text-white text-center shadow-lg"},zs={class:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all duration-300 scale-100"},Hs={class:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"},Vs={class:"p-6 space-y-6"},Us={class:"text-gray-900 font-semibold text-lg"},Qs={class:"text-gray-600 text-sm leading-relaxed whitespace-pre-line bg-gray-50 p-4 rounded-xl border border-gray-100"},Js={class:"px-6 py-4 bg-gray-50 border-t border-gray-100"},io={__name:"TenderDetail",setup(Q){const C=Ce(),k=Me(),f=h(!0),D=h(!1);h([]);const E=h(!1),M=h(!1),L=h({custom_contact_person_display:"",custom_contact_address_display:""}),S=()=>_(this,null,function*(){f.value=!0,E.value=!1,yield B.logout(!1),k.push("/login?redirect="+C.fullPath)}),B=De(),{secureFetch:T}=B,J=()=>_(this,null,function*(){if(B.isAuthenticated)try{const s=((yield(yield T("/api/method/supplier_portal.api.get_saved_tenders")).json()).message||[]).find(g=>g.id===C.params.id);s&&(D.value=!0,a.value&&(a.value.saved_record_name=s.saved_id))}catch(o){console.error("Error checking saved status:",o)}}),ce=()=>_(this,null,function*(){var o,e;if(navigator.share)try{yield navigator.share({title:((o=selectedContract.value)==null?void 0:o.title)||"TenderFlow Document",text:`Check out this tender: ${(e=selectedContract.value)==null?void 0:e.id}`,url:window.location.href}),console.log("Successfully shared")}catch(n){console.error("Error sharing:",n)}else try{yield navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(n){console.error("Failed to copy link:",n)}}),ue=()=>{window.print()},$=h([]),ge=(o,e)=>_(this,null,function*(){try{const n="/api/method/supplier_portal.api.get_similar_tenders?"+new URLSearchParams({category:o,exclude_id:e}),g=yield(yield T(n)).json();g.message&&($.value=g.message.map(y=>({id:y.id,title:y.title,budget:parseFloat(y.budget)||0,deadline:y.deadline?new Date(y.deadline).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})))}catch(n){console.error("Error fetching similar tenders:",n)}}),me=o=>{k.push(`/tenders/${o}`).then(()=>{window.scrollTo({top:0,behavior:"smooth"}),O()})},pe=()=>_(this,null,function*(){var o;if(a.value){if(!B.isAuthenticated){w("Please login to save tenders",{type:"warning"});return}if(D.value){try{const e=yield T("/api/method/supplier_portal.api.delete_saved_tender",{method:"POST",body:JSON.stringify({saved_id:a.value.saved_record_name})}),n=yield e.json();e.ok&&((o=n.message)==null?void 0:o.status)==="success"?(D.value=!1,w("Removed from saved list",{type:"info"})):(console.error("Delete failed:",n),w("Failed to remove tender",{type:"danger"}))}catch(e){console.error("Delete error:",e)}return}try{const e=yield T("/api/method/supplier_portal.api.save_tender",{method:"POST",body:JSON.stringify({rfq_id:a.value.id})}),n=yield e.json();if(e.ok){const s=n.message;if(s&&s.status==="error"){w(s.message||"Error saving tender",{type:"danger"});return}s&&(s.status==="success"||s.status==="skipped")?(D.value=!0,s.name?a.value.saved_record_name=s.name:yield J(),w(s.message||"Tender saved successfully",{type:"success"})):w("Tender saved",{type:"success"})}else console.error("Save failed:",n),w(n.message||"Failed to save tender",{type:"danger"})}catch(e){console.error("Save error:",e)}}}),ve=()=>{k.push("/queries")},a=h(null),O=()=>_(this,null,function*(){var o;f.value=!0;try{const e=yield B.secureFetch("/api/method/supplier_portal.api.get_tender_details?"+new URLSearchParams({name:C.params.id}));if(!e.ok&&(e.status===403||e.status===401))throw E.value=!0,new Error("Session Expired");const s=(yield e.json()).message;if(!s)throw new Error("No data returned");L.value={custom_contact_person_display:s.custom_contact_person_display,custom_contact_address_display:s.custom_contact_address_display},a.value={id:s.name,title:s.title,publishedDate:s.publish_date?new Date(s.publish_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",location:s.billing_address?s.billing_address.replace(/<br\s*\/?>/gi,", "):"N/A",category:s.category,status:s.status,liveBidding:s.enable_live_bidding,description:s.description,contactPerson:s.custom_contact_person_display,contactAddress:s.custom_contact_address_display,UOM:s.uom,quantity:((o=s.total_quantity)==null?void 0:o.toLocaleString("en-IN"))||0,bidsReceived:s.bidsReceived||0,estBudget:s.total_budget,deadline:s.submission_date,department:s.department,currentLowestBid:parseFloat(s.custom_total_budget_||s.total_budget)||0,minBidDecrement:s.min_bid_decrement,emdRequired:s.emd_amount,termsData:s.terms||"No terms and conditions provided.",autoExtension:s.auto_extension_limit?s.auto_extension_limit+" mins":"0 mins",deliveryDate:s.schedule_date,items:s.items||[],documents:(s.documents||[]).map(g=>({name:g.file_name,url:g.file_url,size:g.file_size+" bytes"})),timeline:[{stage:"Published",date:s.publish_date,completed:!!s.publish_date},{stage:"Bid Submission Starts",date:s.submission_start_date,completed:new Date>new Date(s.submission_start_date)},{stage:"Submission Ends",date:s.submission_date,completed:new Date>new Date(s.submission_date)},{stage:"Result Declaration",date:s.result_date,completed:!1},{stage:"Delivery Expected",date:s.schedule_date,completed:!1}].filter(g=>g.date),similarTenders:[]},s.category&&(yield ge(s.category,s.name))}catch(e){console.error("Failed to fetch tender details:",e)}finally{f.value=!1}}),q=h("Overview"),xe=["Overview","Specifications","Documents","Timeline"],b=h(),m=h([]),Y=h({quick_bid_percent:0}),z=h(""),I=h(0),Z=o=>_(this,null,function*(){try{const n=yield(yield T(`/api/method/supplier_portal.api.get_tender_summary_stats?rfq_id=${o}`)).json();n.message&&typeof n.message=="object"?I.value=n.message.total_bids||0:n.message!==void 0&&(I.value=n.message)}catch(e){console.error("Error fetching bid count:",e),I.value=0}}),be=N(()=>a.value?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a.value.estBudget):"₹0"),ye=()=>_(this,null,function*(){try{const e=yield(yield fetch("/api/method/supplier_portal.api.get_portal_settings")).json();e.message&&(Y.value=e.message)}catch(o){console.error("Failed to fetch settings",o)}}),he=N(()=>{var o;if(m.value&&m.value.length>0){const e=Math.min(...m.value.map(n=>n.total||0));return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(((o=a.value)==null?void 0:o.currentLowestBid)||0)}),X=o=>_(this,null,function*(){if(o)try{const n=yield(yield T(`/api/method/supplier_portal.api.get_recent_bid_activity?rfq_id=${o}`)).json(),s=n.message;s&&Array.isArray(s.bids)?(m.value=s.bids.map(g=>({supplier:g.supplier,total:parseFloat(g.total)||0,time:fe(g.creation)})),z.value=s.current_supplier||"",console.log("Bids updated:",m.value),console.log("Current Supplier Identity:",z.value)):(console.warn("No bids data found in response:",n),m.value=[])}catch(e){console.error("Fetch error in fetchRecentBids:",e),m.value=[]}}),fe=o=>{const e=Math.floor((new Date-new Date(o))/6e4);return e<1?"now":e<60?`${e}m ago`:`${Math.floor(e/60)}h ago`},_e=()=>_(this,null,function*(){var s,g,y,r;if(!((s=a.value)!=null&&s.liveBidding)){w("Bidding is not currently active for this tender",{type:"danger"});return}if(!b.value||b.value<=0){w("Please enter a valid bid amount",{type:"warning"});return}const o=m.value.length>0?Math.min(...m.value.map(p=>p.total)):((g=a.value)==null?void 0:g.currentLowestBid)||0,e=((y=a.value)==null?void 0:y.minBidDecrement)||0,n=o-e;if(console.log("Current L1:",o,"Min Decrement:",e,"Max Allowed:",n),b.value>n){w(`Invalid Bid: You must bid ₹${n.toLocaleString()} or lower (Min drop of ₹${e.toLocaleString()} required).`,{type:"danger",timeout:5e3,showIcon:!0});return}try{f.value=!0;const P=yield(yield T("/api/method/supplier_portal.api.place_supplier_bid",{method:"POST",body:JSON.stringify({rfq_id:a.value.id,amount:b.value})})).json();if(P.message&&P.message.status==="success")w(`Bid of ₹${Number(b.value).toLocaleString("en-IN")} placed!`,{type:"success"}),yield X(a.value.id),yield O(a.value.id),yield Z(a.value.id),b.value=null;else{const ke=((r=P.message)==null?void 0:r.message)||"Failed to place bid";w(ke,{type:"danger"})}}catch(p){console.error("Bid submission error:",p),w("An error occurred while placing the bid",{type:"danger"})}finally{f.value=!1}}),we=N(()=>{var o;return m.value.length>0?Math.min(...m.value.map(e=>e.total)):((o=a.value)==null?void 0:o.estBudget)||0}),H=N(()=>{var n;const o=we.value,e=((n=a.value)==null?void 0:n.minBidDecrement)||0;return m.value.length===0?o>0?o:999999999:o-e});N(()=>{var n,s;const o=((n=a.value)==null?void 0:n.total_budget)||0,e=m.value.length>0?Math.min(...m.value.map(g=>g.total)):((s=a.value)==null?void 0:s.currentLowestBid)||0;return o<=0?0:o-e});const V=N(()=>{var r,p;const o=m.value.length>0?Math.min(...m.value.map(P=>P.total)):((r=a.value)==null?void 0:r.estBudget)||0;if(o<=0)return 0;let e=Y.value.live_bidding_quick_entry_percent||0;e>100&&(e=e/1e3);const n=o*(e/100);if(m.value.length===0)return Math.floor(o-n);const s=((p=a.value)==null?void 0:p.minBidDecrement)||0,g=Math.max(n,s),y=o-g;return y>0?Math.floor(y):0}),W=o=>_(this,null,function*(){if(o){f.value=!0,m.value=[];try{yield Promise.all([O(o),J(o),X(o),ye(),Z(o)])}catch(e){console.error("Error refreshing data:",e)}finally{f.value=!1}}}),G=N(()=>{if(!a.value||!a.value.items)return null;const o=a.value.items.find(e=>e.attach_boq);return o?o.attach_boq:null});return Be(()=>C.params.id,o=>{o&&(W(o),window.scrollTo({top:0,behavior:"smooth"}))}),Se(()=>_(this,null,function*(){C.params.id&&(yield W(C.params.id))})),(o,e)=>{var g,y;const n=oe("ArrowDown"),s=oe("X");return d(),i("div",Oe,[f.value?(d(),i("div",ze,[...e[9]||(e[9]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),t("p",{class:"text-gray-500 text-sm font-medium"},"Loading tender details...")],-1)])])):E.value?(d(),i("div",He,[u(c(re),{class:"w-12 h-12 text-orange-500 mb-4"}),e[10]||(e[10]=t("h3",{class:"text-lg font-bold text-gray-900"},"Session Expired",-1)),e[11]||(e[11]=t("p",{class:"text-gray-500 mt-2 max-w-md"},"Your secure session has timed out properly. Please save your work (if any) and reconnect.",-1)),t("button",{onClick:S,class:"mt-6 px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition shadow-sm"}," Reconnect Session ")])):a.value?(d(),i("div",Ue,[t("div",Qe,[t("div",Je,[t("button",{onClick:e[1]||(e[1]=r=>c(k).back()),class:"flex items-center text-sm text-gray-500 hover:text-gray-900 mb-4 transition-colors"},[u(c(Ee),{class:"w-4 h-4 mr-1"}),e[14]||(e[14]=v(" Back to Tenders ",-1))]),t("div",Ye,[t("div",null,[t("div",Ze,[t("span",Xe,l(a.value.category),1),t("span",We,l(a.value.status),1),a.value.liveBidding?(d(),i("span",Ge,[...e[15]||(e[15]=[t("span",{class:"relative flex h-2 w-2 mr-1.5"},[t("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})],-1),v(" Live Bidding ",-1)])])):x("",!0)]),t("h1",Ke,l(a.value.title),1),t("div",et,[t("span",tt,[u(c(ie),{class:"w-3.5 h-3.5"}),v(" "+l(a.value.id),1)]),t("span",st,[u(c(ne),{class:"w-3.5 h-3.5"}),v(" Published: "+l(a.value.publishedDate),1)]),t("span",ot,[u(c(Ae),{class:"w-3.5 h-3.5"}),v(" "+l(a.value.location),1)])])]),t("div",rt,[c(B).isAuthenticated?(d(),i("button",{key:0,onClick:pe,class:A(["flex items-center gap-1.5 px-3 py-2 rounded-md border transition-all duration-200",D.value?"text-indigo-600 bg-indigo-50 border-indigo-200 shadow-sm":"text-slate-500 bg-white border-gray-200 hover:text-indigo-600 hover:border-indigo-100 hover:bg-gray-50"])},[u(c(K),{class:"w-5 h-5 transition-transform duration-200 active:scale-90",fill:D.value?"currentColor":"none"},null,8,["fill"]),t("span",at,l(D.value?"Saved":"Save"),1)],2)):x("",!0),t("button",{onClick:ce,class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},[u(c($e),{class:"w-4 h-4"})]),t("button",{onClick:ue,class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},[u(c(je),{class:"w-4 h-4"})])])]),t("div",nt,[(d(),i(j,null,F(xe,r=>t("button",{key:r,onClick:p=>q.value=r,class:A(["pb-3 text-sm font-medium border-b-2 transition-colors",q.value===r?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"])},l(r),11,it)),64))])])]),t("div",lt,[t("div",dt,[t("div",ct,[q.value==="Overview"?(d(),i("div",ut,[t("div",gt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Description",-1)),t("div",{class:"text-sm text-gray-600 leading-relaxed mb-8",innerHTML:a.value.description||"No description provided."},null,8,mt),t("div",pt,[t("div",vt,[t("div",xt,[u(c(de),{class:"w-5 h-5"})]),t("div",null,[e[16]||(e[16]=t("div",{class:"text-xs text-blue-600 font-medium mb-0.5"},"Min Bid Decrement",-1)),t("div",bt," ₹"+l(((g=a.value.minBidDecrement)==null?void 0:g.toLocaleString("en-IN"))||0),1)])]),t("div",yt,[t("div",ht,[u(c(le),{class:"w-5 h-5"})]),t("div",null,[e[17]||(e[17]=t("div",{class:"text-xs text-green-600 font-medium mb-0.5"},"EMD Required",-1)),t("div",ft," ₹"+l(((y=a.value.emdRequired)==null?void 0:y.toLocaleString("en-IN"))||0),1)])]),t("div",_t,[t("div",wt,[u(c(Pe),{class:"w-5 h-5"})]),t("div",null,[e[18]||(e[18]=t("div",{class:"text-xs text-orange-600 font-medium mb-0.5"}," Bid Submission Last Date",-1)),t("div",kt,l(a.value.deadline||"0 mins"),1)])])])]),t("div",Dt,[e[20]||(e[20]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Terms & Conditions",-1)),t("div",{class:"prose prose-sm max-w-none text-gray-600 leading-relaxed",innerHTML:a.value.termsData},null,8,Bt)]),$.value&&$.value.length>0?(d(),i("div",St,[t("h3",Ct,[u(c(K),{class:"w-4 h-4 text-gray-400"}),e[21]||(e[21]=v(" Similar Tenders ",-1))]),t("div",Mt,[(d(!0),i(j,null,F($.value,r=>(d(),i("div",{key:r.id,onClick:p=>me(r.id),class:"flex items-center justify-between p-4 rounded-lg border border-gray-100 hover:border-green-200 hover:bg-green-50/30 transition-all cursor-pointer group"},[t("div",null,[t("div",Tt,l(r.title),1),t("div",Nt," Budget: ₹"+l(r.budget.toLocaleString("en-IN"))+" • Deadline: "+l(r.deadline),1)]),u(c(Re),{class:"w-4 h-4 text-gray-400 group-hover:text-green-600 transform group-hover:translate-x-1 transition-all"})],8,Lt))),128))])])):x("",!0)])):x("",!0),q.value==="Specifications"?(d(),i("div",At,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Technical Specifications",-1)),t("div",jt,[a.value.items.length===0?(d(),i("div",qt,"No items specified.")):x("",!0),(d(!0),i(j,null,F(a.value.items,(r,p)=>(d(),i("div",{key:p,class:"p-4 bg-gray-50 rounded-lg border border-gray-100 flex items-start gap-3"},[u(c(ie),{class:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),t("div",It,[t("span",Ft,l(r.item_name)+" ("+l(r.item_code)+")",1),r.description?(d(),i("div",{key:0,class:"text-xs text-gray-500 mt-1",innerHTML:r.description},null,8,Rt)):x("",!0),t("div",Et,[t("span",Pt,"Qty: "+l(r.qty)+" "+l(r.uom),1),r.budget?(d(),i("span",$t,"Budget Rate: ₹"+l(r.budget),1)):x("",!0),r.attach_boq?(d(),i("a",{key:1,href:r.attach_boq,target:"_blank",class:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800 hover:underline"},[u(c(U),{class:"w-3 h-3"}),e[22]||(e[22]=v(" Download BOQ ",-1))],8,Ot)):x("",!0)])])]))),128))]),e[24]||(e[24]=ee('<div class="mt-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">Delivery Requirements</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Location</div><div class="font-medium text-gray-900">Delhi NCR</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Expected Delivery Date</div><div class="font-medium text-gray-900">15 March 2024</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Terms</div><div class="font-medium text-gray-900">FOR Destination</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Inspection</div><div class="font-medium text-gray-900">Before Dispatch + At Site</div></div></div></div>',1))])):x("",!0),q.value==="Documents"?(d(),i("div",zt,[e[25]||(e[25]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Documents",-1)),t("div",Ht,[!a.value.documents||a.value.documents.length===0?(d(),i("div",Vt,"No documents attached.")):x("",!0),(d(!0),i(j,null,F(a.value.documents,(r,p)=>(d(),i("div",{key:p,class:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all group"},[t("div",Ut,[t("div",Qt,[u(c(te),{class:"w-6 h-6"})]),t("div",null,[t("div",Jt,l(r.name),1),t("div",Yt,l(r.size),1)])]),t("a",{href:r.url,target:"_blank",class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-white rounded-full transition-colors shadow-sm"},[u(c(U),{class:"w-4 h-4"})],8,Zt)]))),128))])])):x("",!0),q.value==="Timeline"?(d(),i("div",Xt,[e[27]||(e[27]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Timeline",-1)),t("div",Wt,[e[26]||(e[26]=t("div",{class:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-gray-200"},null,-1)),(d(!0),i(j,null,F(a.value.timeline,(r,p)=>(d(),i("div",{key:p,class:"relative flex gap-6 mb-8 last:mb-0"},[t("div",{class:A(["relative z-10 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center bg-white",r.completed?"border-indigo-600 bg-indigo-50":"border-gray-300"])},[r.completed?(d(),i("div",Gt)):x("",!0)],2),t("div",Kt,[t("h4",es,l(r.stage),1),t("p",ts,l(r.date),1)]),r.completed?(d(),i("div",ss," Completed ")):x("",!0)]))),128))])])):x("",!0)]),t("div",os,[t("div",rs,[e[36]||(e[36]=t("h3",{class:"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2"},"Tender Summary",-1)),t("div",as,[t("div",null,[t("div",ns,[u(c(te),{class:"w-3.5 h-3.5"}),e[28]||(e[28]=v(" Quantity ",-1))]),t("div",is,l(a.value.quantity)+" "+l(a.value.UOM),1)]),t("div",null,[t("div",ls,[u(c(re),{class:"w-3.5 h-3.5"}),e[29]||(e[29]=v(" Bids Received ",-1))]),v(" "+l(typeof I.value=="object"?I.value.total_bids:I.value),1)]),t("div",null,[t("div",ds,[u(c(le),{class:"w-3.5 h-3.5"}),e[30]||(e[30]=v(" Est. Budget ",-1))]),t("div",cs,l(be.value),1)]),t("div",null,[t("div",us,[u(c(ne),{class:"w-3.5 h-3.5"}),e[31]||(e[31]=v(" Delivery Date ",-1))]),t("div",gs,l(a.value.deliveryDate),1)])]),t("div",ms,[t("div",ps,[t("div",vs,[u(c(qe),{class:"w-4 h-4"}),e[32]||(e[32]=v(" Deadline ",-1))]),t("div",xs,l(a.value.deadline),1)]),t("div",bs,[t("div",ys,[u(c(Ie),{class:"w-4 h-4"}),e[33]||(e[33]=v(" Department ",-1))]),t("div",hs,l(a.value.department),1)])]),t("div",fs,[t("button",{class:"flex-grow bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold py-2.5 rounded-lg shadow-sm transition-colors flex items-center justify-center gap-2",onClick:e[2]||(e[2]=(...r)=>o.openBidModal&&o.openBidModal(...r))},[u(c(Fe),{class:"w-4 h-4"}),e[34]||(e[34]=v(" Submit Your Bid ",-1))]),t("button",{onClick:ve,class:"p-2.5 bg-white border border-gray-200 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors shadow-sm",title:"Ask a Query"},[u(c(se),{class:"w-5 h-5"})])]),G.value?(d(),i("div",_s,[t("a",{href:G.value,target:"_blank",class:"w-full bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 text-sm font-semibold py-2.5 rounded-lg transition-colors flex items-center justify-center gap-2 cursor-pointer no-underline"},[u(c(U),{class:"w-4 h-4 text-gray-500"}),e[35]||(e[35]=v(" Download BOQ ",-1))],8,ws)])):x("",!0)]),a.value.liveBidding?(d(),i("div",ks,[e[41]||(e[41]=ee('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2 px-2.5 py-1 bg-red-50 rounded-full border border-red-100"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span><span class="text-[10px] font-bold text-red-600 uppercase tracking-wider">Live Bidding Active</span></div><div class="text-[10px] text-gray-400 font-medium italic"> Updated 0s ago </div></div>',1)),t("div",Ds,[e[37]||(e[37]=t("div",{class:"text-xs text-gray-500 font-medium mb-1 uppercase tracking-wider"},"Current Lowest Bid",-1)),t("div",Bs,l(he.value),1),m.value.length>0?(d(),i("div",Ss,[u(c(de),{class:"w-3 h-3"}),v(" ₹"+l((a.value.estBudget-Math.min(...m.value.map(r=>r.total))).toLocaleString("en-IN"))+" below budget ",1)])):x("",!0)]),t("div",Cs,[e[39]||(e[39]=t("label",{class:"text-xs font-semibold text-gray-700 mb-2 block"},"Enter Your Bid Amount",-1)),t("div",Ms,[t("div",Ls,[e[38]||(e[38]=t("span",{class:"absolute left-3 top-2.5 text-gray-400"},"₹",-1)),Le(t("input",{"onUpdate:modelValue":e[3]||(e[3]=r=>b.value=r),type:"number",class:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-400 focus:border-amber-400",placeholder:"Enter amount"},null,512),[[Te,b.value]])]),t("button",{onClick:_e,disabled:!b.value||b.value<=0||f.value,class:A(["px-4 py-2 bg-orange-400 text-white rounded-lg font-medium transition-all flex items-center gap-2",!b.value||b.value<=0||f.value||b.value>H.value?"opacity-40 cursor-not-allowed pointer-events-none select-none":"opacity-100 hover:bg-orange-500 active:scale-95"])},[f.value?(d(),i("span",Ns,"Placing...")):(d(),i(j,{key:1},[v(" Bid ")],64))],10,Ts)]),t("div",As,[b.value>H.value?(d(),i("p",js,[u(c(ae),{class:"w-3 h-3"}),v(" Must be ₹"+l(H.value.toLocaleString("en-IN"))+" or less to qualify ",1)])):x("",!0)]),t("button",{onClick:e[4]||(e[4]=r=>b.value=V.value),disabled:V.value<=0,class:"w-full py-1.5 border border-gray-200 rounded-lg flex items-center justify-center gap-2 text-gray-700 hover:bg-gray-50 transition-colors text-sm disabled:opacity-50"},[u(n,{class:"w-4 h-4 text-gray-500"}),v(" Quick bid: ₹"+l(V.value.toLocaleString("en-IN")),1)],8,qs)]),t("div",Is,[e[40]||(e[40]=t("h4",{class:"text-xs font-bold text-gray-900 mb-4 uppercase tracking-wider"},"Recent Bid Activity",-1)),m.value.length===0?(d(),i("div",Fs," No bids placed yet. Be the first! ")):x("",!0),(d(!0),i(j,null,F(m.value,(r,p)=>(d(),i("div",{key:p,class:A(["flex items-center justify-between py-3 border-b border-gray-50 last:border-0",{"bg-green-50 -mx-2 px-3 rounded-lg shadow-sm":p===0}])},[t("div",Rs,[t("span",{class:A(["font-bold text-sm",p===0?"text-green-700":"text-gray-700"])},l(r.supplier===z.value?r.supplier:"Masked Supplier"),3),t("span",Es,l(r.time||"Just now"),1)]),t("div",Ps,[t("div",{class:A(["font-bold",p===0?"text-green-600":"text-gray-900"])}," ₹"+l(new Intl.NumberFormat("en-IN").format(r.total)),3),p===0?(d(),i("span",$s,"Current L1")):x("",!0)])],2))),128))])])):x("",!0),t("div",Os,[e[43]||(e[43]=t("h4",{class:"font-bold text-sm mb-2"},"Need Help?",-1)),e[44]||(e[44]=t("p",{class:"text-xs text-indigo-200 mb-4 leading-relaxed"}," Have questions about this tender? Contact our support team. ",-1)),t("button",{onClick:e[5]||(e[5]=r=>M.value=!0),class:"w-full bg-white text-indigo-900 text-xs font-bold py-2 rounded-lg shadow-sm hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2"},[u(c(se),{class:"w-4 h-4"}),e[42]||(e[42]=v(" Contact Support ",-1))])]),M.value?(d(),i("div",{key:1,class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",onClick:e[8]||(e[8]=Ne(r=>M.value=!1,["self"]))},[t("div",zs,[t("div",Hs,[e[45]||(e[45]=t("h3",{class:"font-bold text-gray-900"},"Contact Information",-1)),t("button",{onClick:e[6]||(e[6]=r=>M.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors"},[u(s,{class:"h-5 w-5"})])]),t("div",Vs,[t("div",null,[e[46]||(e[46]=t("label",{class:"text-[10px] uppercase tracking-widest font-bold text-indigo-600 mb-1 block"},"Contact Person",-1)),t("p",Us,l(L.value.custom_contact_person_display||"Support Team"),1)]),t("div",null,[e[47]||(e[47]=t("label",{class:"text-[10px] uppercase tracking-widest font-bold text-indigo-600 mb-1 block"},"Office Address",-1)),t("div",Qs,l(L.value.custom_contact_address_display||"Address details not available."),1)])]),t("div",Js,[t("button",{onClick:e[7]||(e[7]=r=>M.value=!1),class:"w-full px-4 py-2.5 bg-indigo-600 text-white text-sm font-bold rounded-lg hover:bg-indigo-700 transition-all shadow-md shadow-indigo-100"}," Close ")])])])):x("",!0)])])])])):(d(),i("div",Ve,[u(c(ae),{class:"w-12 h-12 text-red-500 mb-4"}),e[12]||(e[12]=t("h3",{class:"text-lg font-bold text-gray-900"},"Tender Not Found",-1)),e[13]||(e[13]=t("p",{class:"text-gray-500 mt-2 max-w-md"},"The tender you are looking for does not exist or you do not have permission to view it.",-1)),t("button",{onClick:e[0]||(e[0]=r=>c(k).push("/tenders")),class:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"},"Back to Tenders")]))])}}};export{io as default};
//# sourceMappingURL=TenderDetail-BC6Jhw13.js.map
