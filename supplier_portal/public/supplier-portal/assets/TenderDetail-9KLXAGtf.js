var f=(U,S,k)=>new Promise((y,B)=>{var I=b=>{try{D(k.next(b))}catch(C){B(C)}},P=b=>{try{D(k.throw(b))}catch(C){B(C)}},D=b=>b.done?y(b.value):Promise.resolve(b.value).then(I,P);D((k=k.apply(U,S)).next())});import{c as F,m as w,l as fe,y as L,w as _e,p as we,z as ke,a as n,b as t,e as u,u as c,g as Be,f as p,k as v,t as d,n as T,B as G,F as N,r as A,d as K,j as X,M as De,q as Se,v as Me,x as Le,o as l}from"./index-BungJXld.js";import{t as _}from"./mosha-vue-toastify.es-D2zaMZWd.js";import{C as ee}from"./circle-user-C3rtQvTs.js";import{C as te}from"./circle-alert-DoRrRN8x.js";import{C as se}from"./calendar-BqltoVJ5.js";import{M as Te}from"./map-pin-BjE_Irjf.js";import{P as Ne}from"./printer-DTkCXixi.js";import{C as Ce}from"./clock-Co5esllk.js";import{B as qe}from"./building-2-D4eZ0476.js";import{Z as je}from"./zap-C6KDUqvu.js";import{D as V}from"./download-Bb9N-aHc.js";import{A as Ae}from"./arrow-right-CgvH4TrT.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=F("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=F("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=F("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=F("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=F("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=F("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Ee={class:"min-h-screen bg-gray-50 pb-12"},Pe={key:0,class:"flex items-center justify-center min-h-[60vh]"},Oe={key:1,class:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4"},$e={key:2,class:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4"},He={key:3},ze={class:"bg-white border-b border-gray-200"},Ve={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Ue={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},Qe={class:"flex flex-wrap gap-2 mb-3"},Je={class:"inline-flex items-center rounded-md bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-600"},Ye={class:"inline-flex items-center rounded-md bg-indigo-50 px-2.5 py-0.5 text-xs font-medium text-indigo-700 border border-indigo-100"},Ze={key:0,class:"inline-flex items-center rounded-md bg-orange-50 px-2.5 py-0.5 text-xs font-medium text-orange-700 border border-orange-100"},We={class:"text-2xl font-bold text-gray-900 mb-2"},Ge={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},Ke={class:"flex items-center gap-1"},Xe={class:"flex items-center gap-1"},et={class:"flex items-center gap-1"},tt={class:"flex gap-2"},st={class:"text-sm font-semibold"},rt={class:"flex gap-6 mt-8 border-b border-gray-100"},ot=["onClick"],at={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},it={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},nt={class:"lg:col-span-2 space-y-6"},lt={key:0,class:"space-y-6"},dt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},ct=["innerHTML"],ut={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},gt={class:"p-4 bg-blue-50 rounded-lg border border-blue-100 flex items-center gap-3"},mt={class:"p-2 bg-blue-100 rounded-lg text-blue-600"},pt={class:"text-sm font-bold text-gray-900"},vt={class:"p-4 bg-green-50 rounded-lg border border-green-100 flex items-center gap-3"},xt={class:"p-2 bg-green-100 rounded-lg text-green-600"},bt={class:"text-sm font-bold text-gray-900"},ht={class:"p-4 bg-orange-50 rounded-lg border border-orange-100 flex items-center gap-3"},yt={class:"p-2 bg-orange-100 rounded-lg text-orange-600"},ft={class:"text-sm font-bold text-gray-900"},_t={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},wt=["innerHTML"],kt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Bt={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Dt={class:"space-y-3"},St=["onClick"],Mt={class:"text-sm font-bold text-gray-900 group-hover:text-green-600 transition-colors"},Lt={class:"text-xs text-gray-500 mt-1"},Tt={key:1,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Nt={class:"space-y-4"},Ct={key:0,class:"text-gray-500 italic"},qt={class:"flex-grow"},jt={class:"text-sm font-semibold text-gray-900 block"},At=["innerHTML"],Ft={class:"mt-2 flex gap-4 text-xs font-medium text-gray-700 items-center"},It={class:"bg-white px-2 py-1 rounded border border-gray-200"},Rt={key:0,class:"bg-white px-2 py-1 rounded border border-gray-200"},Et=["href"],Pt={key:2,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Ot={class:"space-y-3"},$t={key:0,class:"text-gray-500 italic"},Ht={class:"flex items-center gap-4"},zt={class:"p-2 bg-red-50 rounded-lg text-red-500"},Vt={class:"font-medium text-gray-900 group-hover:text-indigo-700"},Ut={class:"text-xs text-gray-500"},Qt=["href"],Jt={key:3,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Yt={class:"relative pl-4"},Zt={key:0,class:"w-2.5 h-2.5 rounded-full bg-indigo-600"},Wt={class:"flex-grow pt-0.5"},Gt={class:"text-sm font-bold text-gray-900"},Kt={class:"text-xs text-gray-500 mt-1"},Xt={key:0,class:"text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded self-start"},es={class:"lg:col-span-1 space-y-6"},ts={class:"bg-white rounded-xl border border-gray-200 px-6 py-6 shadow-sm relative overflow-hidden"},ss={class:"grid grid-cols-2 gap-y-4 gap-x-2 text-sm mb-6"},rs={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},os={class:"font-bold text-gray-900"},as={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},is={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},ns={class:"font-bold text-gray-900"},ls={class:"flex items-center gap-1.5 text-xs text-gray-500 mb-0.5"},ds={class:"font-bold text-gray-900"},cs={class:"pt-4 border-t border-gray-100 mb-6 space-y-3"},us={class:"flex justify-between items-center"},gs={class:"flex items-center gap-2 text-sm text-gray-500"},ms={class:"text-sm font-bold text-gray-900"},ps={class:"flex justify-between items-center"},vs={class:"flex items-center gap-2 text-sm text-gray-500"},xs={class:"text-sm font-bold text-gray-900"},bs={class:"flex items-center gap-2 mb-3"},hs={key:0},ys=["href"],fs={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm ring-1 ring-gray-200"},_s={class:"text-center py-6 bg-white rounded-xl border-2 border-green-500/20 mb-6 shadow-[0_0_15px_rgba(34,197,94,0.1)]"},ws={class:"text-3xl font-bold text-green-600 tracking-tight"},ks={key:0,class:"text-xs font-medium text-green-600 mt-1 flex items-center justify-center gap-1"},Bs={class:"mb-4"},Ds={class:"flex gap-2 mb-3"},Ss={class:"relative flex-grow"},Ms=["disabled"],Ls={key:0},Ts={class:"min-h-[20px] mb-3"},Ns={key:0,class:"text-[11px] text-red-600 font-bold px-1 flex items-center gap-1"},Cs=["disabled"],qs={class:"mt-6"},js={key:0,class:"text-center py-4 text-xs text-gray-400 italic"},As={class:"flex flex-col"},Fs={class:"text-[10px] text-gray-400"},Is={class:"text-right"},Rs={key:0,class:"text-[10px] font-bold text-green-500 uppercase"},Gs={__name:"TenderDetail",setup(U){const S=ke(),k=Be(),y=w(!0),B=w(!1);w([]);const I=w(!1),P=()=>f(this,null,function*(){y.value=!0,I.value=!1,yield D.logout(!1),k.push("/login?redirect="+S.fullPath)}),D=fe(),{secureFetch:b}=D,C=()=>f(this,null,function*(){if(D.isAuthenticated)try{const s=((yield(yield b("/api/method/supplier_portal.api.get_saved_tenders")).json()).message||[]).find(g=>g.id===S.params.id);s&&(B.value=!0,a.value&&(a.value.saved_record_name=s.saved_id))}catch(r){console.error("Error checking saved status:",r)}}),ie=()=>f(this,null,function*(){var r,e;if(navigator.share)try{yield navigator.share({title:((r=selectedContract.value)==null?void 0:r.title)||"TenderFlow Document",text:`Check out this tender: ${(e=selectedContract.value)==null?void 0:e.id}`,url:window.location.href}),console.log("Successfully shared")}catch(i){console.error("Error sharing:",i)}else try{yield navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!")}catch(i){console.error("Failed to copy link:",i)}}),ne=()=>{window.print()},E=w([]),le=(r,e)=>f(this,null,function*(){try{const i="/api/method/supplier_portal.api.get_similar_tenders?"+new URLSearchParams({category:r,exclude_id:e}),g=yield(yield b(i)).json();g.message&&(E.value=g.message.map(o=>({id:o.id,title:o.title,budget:parseFloat(o.budget)||0,deadline:o.deadline?new Date(o.deadline).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})))}catch(i){console.error("Error fetching similar tenders:",i)}}),de=r=>{k.push(`/tenders/${r}`).then(()=>{window.scrollTo({top:0,behavior:"smooth"}),O()})},ce=()=>f(this,null,function*(){var r;if(a.value){if(!D.isAuthenticated){_("Please login to save tenders",{type:"warning"});return}if(B.value){try{const e=yield b("/api/method/supplier_portal.api.delete_saved_tender",{method:"POST",body:JSON.stringify({saved_id:a.value.saved_record_name})}),i=yield e.json();e.ok&&((r=i.message)==null?void 0:r.status)==="success"?(B.value=!1,_("Removed from saved list",{type:"info"})):(console.error("Delete failed:",i),_("Failed to remove tender",{type:"danger"}))}catch(e){console.error("Delete error:",e)}return}try{const e=yield b("/api/method/supplier_portal.api.save_tender",{method:"POST",body:JSON.stringify({rfq_id:a.value.id})}),i=yield e.json();if(e.ok){const s=i.message;if(s&&s.status==="error"){_(s.message||"Error saving tender",{type:"danger"});return}s&&(s.status==="success"||s.status==="skipped")?(B.value=!0,s.name?a.value.saved_record_name=s.name:yield C(),_(s.message||"Tender saved successfully",{type:"success"})):_("Tender saved",{type:"success"})}else console.error("Save failed:",i),_(i.message||"Failed to save tender",{type:"danger"})}catch(e){console.error("Save error:",e)}}}),ue=()=>{k.push("/queries")},a=w(null),O=()=>f(this,null,function*(){var r;y.value=!0;try{const e=yield D.secureFetch("/api/method/supplier_portal.api.get_tender_details?"+new URLSearchParams({name:S.params.id}));if(!e.ok&&(e.status===403||e.status===401))throw console.warn("Permission denied for tender. Likely session expired."),I.value=!0,new Error("Session Expired");const s=(yield e.json()).message;if(!s)throw new Error("No data returned");a.value={id:s.name,title:s.title,publishedDate:s.publish_date?new Date(s.publish_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",location:s.billing_address,category:s.category,status:s.status,liveBidding:s.enable_live_bidding,description:s.description,UOM:s.uom,quantity:((r=s.total_quantity)==null?void 0:r.toLocaleString("en-IN"))||0,bidsReceived:s.bidsReceived||0,estBudget:s.total_budget,deadline:s.submission_date,department:s.department,currentLowestBid:parseFloat(s.custom_total_budget_||s.total_budget)||0,minBidDecrement:s.min_bid_decrement,emdRequired:s.emd_amount,termsData:s.terms||"No terms and conditions provided.",autoExtension:s.auto_extension_limit?s.auto_extension_limit+" mins":"0 mins",deliveryDate:s.schedule_date,items:s.items||[],documents:(s.documents||[]).map(g=>({name:g.file_name,url:g.file_url,size:g.file_size+" bytes"})),timeline:[{stage:"Published",date:s.publish_date,completed:!!s.publish_date},{stage:"Bid Submission Starts",date:s.submission_start_date,completed:new Date>new Date(s.submission_start_date)},{stage:"Submission Ends",date:s.submission_date,completed:new Date>new Date(s.submission_date)},{stage:"Result Declaration",date:s.result_date,completed:!1},{stage:"Delivery Expected",date:s.schedule_date,completed:!1}].filter(g=>g.date),similarTenders:[]},s.category&&(yield le(s.category,s.name))}catch(e){console.error("Failed to fetch tender details:",e)}finally{y.value=!1}}),q=w("Overview"),ge=["Overview","Specifications","Documents","Timeline"],h=w(),m=w([]),Q=w({quick_bid_percent:0}),$=w(""),j=w(0),J=r=>f(this,null,function*(){try{const i=yield(yield b(`/api/method/supplier_portal.api.get_tender_summary_stats?rfq_id=${r}`)).json();i.message&&typeof i.message=="object"?j.value=i.message.total_bids||0:i.message!==void 0&&(j.value=i.message)}catch(e){console.error("Error fetching bid count:",e),j.value=0}}),me=L(()=>a.value?new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a.value.estBudget):"₹0"),pe=()=>f(this,null,function*(){try{const e=yield(yield fetch("/api/method/supplier_portal.api.get_portal_settings")).json();e.message&&(Q.value=e.message)}catch(r){console.error("Failed to fetch settings",r)}}),ve=L(()=>{var r;if(m.value&&m.value.length>0){const e=Math.min(...m.value.map(i=>i.total||0));return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(((r=a.value)==null?void 0:r.currentLowestBid)||0)}),Y=r=>f(this,null,function*(){if(r)try{const i=yield(yield b(`/api/method/supplier_portal.api.get_recent_bid_activity?rfq_id=${r}`)).json(),s=i.message;s&&Array.isArray(s.bids)?(m.value=s.bids.map(g=>({supplier:g.supplier,total:parseFloat(g.total)||0,time:xe(g.creation)})),$.value=s.current_supplier||"",console.log("Bids updated:",m.value),console.log("Current Supplier Identity:",$.value)):(console.warn("No bids data found in response:",i),m.value=[])}catch(e){console.error("Fetch error in fetchRecentBids:",e),m.value=[]}}),xe=r=>{const e=Math.floor((new Date-new Date(r))/6e4);return e<1?"now":e<60?`${e}m ago`:`${Math.floor(e/60)}h ago`},be=()=>f(this,null,function*(){var s,g,o,x;if(!((s=a.value)!=null&&s.liveBidding)){_("Bidding is not currently active for this tender",{type:"danger"});return}if(!h.value||h.value<=0){_("Please enter a valid bid amount",{type:"warning"});return}const r=m.value.length>0?Math.min(...m.value.map(M=>M.total)):((g=a.value)==null?void 0:g.currentLowestBid)||0,e=((o=a.value)==null?void 0:o.minBidDecrement)||0,i=r-e;if(console.log("Current L1:",r,"Min Decrement:",e,"Max Allowed:",i),h.value>i){_(`Invalid Bid: You must bid ₹${i.toLocaleString()} or lower (Min drop of ₹${e.toLocaleString()} required).`,{type:"danger",timeout:5e3,showIcon:!0});return}try{y.value=!0;const R=yield(yield b("/api/method/supplier_portal.api.place_supplier_bid",{method:"POST",body:JSON.stringify({rfq_id:a.value.id,amount:h.value})})).json();if(R.message&&R.message.status==="success")_(`Bid of ₹${Number(h.value).toLocaleString("en-IN")} placed!`,{type:"success"}),yield Y(a.value.id),yield O(a.value.id),yield J(a.value.id),h.value=null;else{const ye=((x=R.message)==null?void 0:x.message)||"Failed to place bid";_(ye,{type:"danger"})}}catch(M){console.error("Bid submission error:",M),_("An error occurred while placing the bid",{type:"danger"})}finally{y.value=!1}}),he=L(()=>{var r;return m.value.length>0?Math.min(...m.value.map(e=>e.total)):((r=a.value)==null?void 0:r.estBudget)||0}),H=L(()=>{var i;const r=he.value,e=((i=a.value)==null?void 0:i.minBidDecrement)||0;return m.value.length===0?r>0?r:999999999:r-e});L(()=>{var i,s;const r=((i=a.value)==null?void 0:i.total_budget)||0,e=m.value.length>0?Math.min(...m.value.map(g=>g.total)):((s=a.value)==null?void 0:s.currentLowestBid)||0;return r<=0?0:r-e});const z=L(()=>{var x,M;const r=m.value.length>0?Math.min(...m.value.map(R=>R.total)):((x=a.value)==null?void 0:x.estBudget)||0;if(r<=0)return 0;let e=Q.value.live_bidding_quick_entry_percent||0;e>100&&(e=e/1e3);const i=r*(e/100);if(m.value.length===0)return Math.floor(r-i);const s=((M=a.value)==null?void 0:M.minBidDecrement)||0,g=Math.max(i,s),o=r-g;return o>0?Math.floor(o):0}),Z=r=>f(this,null,function*(){if(r){y.value=!0,m.value=[];try{yield Promise.all([O(r),C(r),Y(r),pe(),J(r)])}catch(e){console.error("Error refreshing data:",e)}finally{y.value=!1}}}),W=L(()=>{if(!a.value||!a.value.items)return null;const r=a.value.items.find(e=>e.attach_boq);return r?r.attach_boq:null});return _e(()=>S.params.id,r=>{r&&(Z(r),window.scrollTo({top:0,behavior:"smooth"}))}),we(()=>f(this,null,function*(){S.params.id&&(yield Z(S.params.id))})),(r,e)=>{var s,g;const i=Le("ArrowDown");return l(),n("div",Ee,[y.value?(l(),n("div",Pe,[...e[5]||(e[5]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),t("p",{class:"text-gray-500 text-sm font-medium"},"Loading tender details...")],-1)])])):I.value?(l(),n("div",Oe,[u(c(ee),{class:"w-12 h-12 text-orange-500 mb-4"}),e[6]||(e[6]=t("h3",{class:"text-lg font-bold text-gray-900"},"Session Expired",-1)),e[7]||(e[7]=t("p",{class:"text-gray-500 mt-2 max-w-md"},"Your secure session has timed out properly. Please save your work (if any) and reconnect.",-1)),t("button",{onClick:P,class:"mt-6 px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition shadow-sm"}," Reconnect Session ")])):a.value?(l(),n("div",He,[t("div",ze,[t("div",Ve,[t("button",{onClick:e[1]||(e[1]=o=>c(k).back()),class:"flex items-center text-sm text-gray-500 hover:text-gray-900 mb-4 transition-colors"},[u(c(Fe),{class:"w-4 h-4 mr-1"}),e[10]||(e[10]=p(" Back to Tenders ",-1))]),t("div",Ue,[t("div",null,[t("div",Qe,[t("span",Je,d(a.value.category),1),t("span",Ye,d(a.value.status),1),a.value.liveBidding?(l(),n("span",Ze,[...e[11]||(e[11]=[t("span",{class:"relative flex h-2 w-2 mr-1.5"},[t("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})],-1),p(" Live Bidding ",-1)])])):v("",!0)]),t("h1",We,d(a.value.title),1),t("div",Ge,[t("span",Ke,[u(c(re),{class:"w-3.5 h-3.5"}),p(" "+d(a.value.id),1)]),t("span",Xe,[u(c(se),{class:"w-3.5 h-3.5"}),p(" Published: "+d(a.value.publishedDate),1)]),t("span",et,[u(c(Te),{class:"w-3.5 h-3.5"}),p(" "+d(a.value.location),1)])])]),t("div",tt,[c(D).isAuthenticated?(l(),n("button",{key:0,onClick:ce,class:T(["flex items-center gap-1.5 px-3 py-2 rounded-md border transition-all duration-200",B.value?"text-indigo-600 bg-indigo-50 border-indigo-200 shadow-sm":"text-slate-500 bg-white border-gray-200 hover:text-indigo-600 hover:border-indigo-100 hover:bg-gray-50"])},[u(c(G),{class:"w-5 h-5 transition-transform duration-200 active:scale-90",fill:B.value?"currentColor":"none"},null,8,["fill"]),t("span",st,d(B.value?"Saved":"Save"),1)],2)):v("",!0),t("button",{onClick:ie,class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},[u(c(Re),{class:"w-4 h-4"})]),t("button",{onClick:ne,class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},[u(c(Ne),{class:"w-4 h-4"})])])]),t("div",rt,[(l(),n(N,null,A(ge,o=>t("button",{key:o,onClick:x=>q.value=o,class:T(["pb-3 text-sm font-medium border-b-2 transition-colors",q.value===o?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"])},d(o),11,ot)),64))])])]),t("div",at,[t("div",it,[t("div",nt,[q.value==="Overview"?(l(),n("div",lt,[t("div",dt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Description",-1)),t("div",{class:"text-sm text-gray-600 leading-relaxed mb-8",innerHTML:a.value.description||"No description provided."},null,8,ct),t("div",ut,[t("div",gt,[t("div",mt,[u(c(ae),{class:"w-5 h-5"})]),t("div",null,[e[12]||(e[12]=t("div",{class:"text-xs text-blue-600 font-medium mb-0.5"},"Min Bid Decrement",-1)),t("div",pt," ₹"+d(((s=a.value.minBidDecrement)==null?void 0:s.toLocaleString("en-IN"))||0),1)])]),t("div",vt,[t("div",xt,[u(c(oe),{class:"w-5 h-5"})]),t("div",null,[e[13]||(e[13]=t("div",{class:"text-xs text-green-600 font-medium mb-0.5"},"EMD Required",-1)),t("div",bt," ₹"+d(((g=a.value.emdRequired)==null?void 0:g.toLocaleString("en-IN"))||0),1)])]),t("div",ht,[t("div",yt,[u(c(Ie),{class:"w-5 h-5"})]),t("div",null,[e[14]||(e[14]=t("div",{class:"text-xs text-orange-600 font-medium mb-0.5"}," Bid Submission Last Date",-1)),t("div",ft,d(a.value.deadline||"0 mins"),1)])])])]),t("div",_t,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Terms & Conditions",-1)),t("div",{class:"prose prose-sm max-w-none text-gray-600 leading-relaxed",innerHTML:a.value.termsData},null,8,wt)]),E.value&&E.value.length>0?(l(),n("div",kt,[t("h3",Bt,[u(c(G),{class:"w-4 h-4 text-gray-400"}),e[17]||(e[17]=p(" Similar Tenders ",-1))]),t("div",Dt,[(l(!0),n(N,null,A(E.value,o=>(l(),n("div",{key:o.id,onClick:x=>de(o.id),class:"flex items-center justify-between p-4 rounded-lg border border-gray-100 hover:border-green-200 hover:bg-green-50/30 transition-all cursor-pointer group"},[t("div",null,[t("div",Mt,d(o.title),1),t("div",Lt," Budget: ₹"+d(o.budget.toLocaleString("en-IN"))+" • Deadline: "+d(o.deadline),1)]),u(c(Ae),{class:"w-4 h-4 text-gray-400 group-hover:text-green-600 transform group-hover:translate-x-1 transition-all"})],8,St))),128))])])):v("",!0)])):v("",!0),q.value==="Specifications"?(l(),n("div",Tt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Technical Specifications",-1)),t("div",Nt,[a.value.items.length===0?(l(),n("div",Ct,"No items specified.")):v("",!0),(l(!0),n(N,null,A(a.value.items,(o,x)=>(l(),n("div",{key:x,class:"p-4 bg-gray-50 rounded-lg border border-gray-100 flex items-start gap-3"},[u(c(re),{class:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),t("div",qt,[t("span",jt,d(o.item_name)+" ("+d(o.item_code)+")",1),o.description?(l(),n("div",{key:0,class:"text-xs text-gray-500 mt-1",innerHTML:o.description},null,8,At)):v("",!0),t("div",Ft,[t("span",It,"Qty: "+d(o.qty)+" "+d(o.uom),1),o.budget?(l(),n("span",Rt,"Budget Rate: ₹"+d(o.budget),1)):v("",!0),o.attach_boq?(l(),n("a",{key:1,href:o.attach_boq,target:"_blank",class:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800 hover:underline"},[u(c(V),{class:"w-3 h-3"}),e[18]||(e[18]=p(" Download BOQ ",-1))],8,Et)):v("",!0)])])]))),128))]),e[20]||(e[20]=K('<div class="mt-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">Delivery Requirements</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Location</div><div class="font-medium text-gray-900">Delhi NCR</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Expected Delivery Date</div><div class="font-medium text-gray-900">15 March 2024</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Terms</div><div class="font-medium text-gray-900">FOR Destination</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Inspection</div><div class="font-medium text-gray-900">Before Dispatch + At Site</div></div></div></div>',1))])):v("",!0),q.value==="Documents"?(l(),n("div",Pt,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Documents",-1)),t("div",Ot,[!a.value.documents||a.value.documents.length===0?(l(),n("div",$t,"No documents attached.")):v("",!0),(l(!0),n(N,null,A(a.value.documents,(o,x)=>(l(),n("div",{key:x,class:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all group"},[t("div",Ht,[t("div",zt,[u(c(X),{class:"w-6 h-6"})]),t("div",null,[t("div",Vt,d(o.name),1),t("div",Ut,d(o.size),1)])]),t("a",{href:o.url,target:"_blank",class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-white rounded-full transition-colors shadow-sm"},[u(c(V),{class:"w-4 h-4"})],8,Qt)]))),128))])])):v("",!0),q.value==="Timeline"?(l(),n("div",Jt,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Timeline",-1)),t("div",Yt,[e[22]||(e[22]=t("div",{class:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-gray-200"},null,-1)),(l(!0),n(N,null,A(a.value.timeline,(o,x)=>(l(),n("div",{key:x,class:"relative flex gap-6 mb-8 last:mb-0"},[t("div",{class:T(["relative z-10 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center bg-white",o.completed?"border-indigo-600 bg-indigo-50":"border-gray-300"])},[o.completed?(l(),n("div",Zt)):v("",!0)],2),t("div",Wt,[t("h4",Gt,d(o.stage),1),t("p",Kt,d(o.date),1)]),o.completed?(l(),n("div",Xt," Completed ")):v("",!0)]))),128))])])):v("",!0)]),t("div",es,[t("div",ts,[e[32]||(e[32]=t("h3",{class:"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2"},"Tender Summary",-1)),t("div",ss,[t("div",null,[t("div",rs,[u(c(X),{class:"w-3.5 h-3.5"}),e[24]||(e[24]=p(" Quantity ",-1))]),t("div",os,d(a.value.quantity)+" "+d(a.value.UOM),1)]),t("div",null,[t("div",as,[u(c(ee),{class:"w-3.5 h-3.5"}),e[25]||(e[25]=p(" Bids Received ",-1))]),p(" "+d(typeof j.value=="object"?j.value.total_bids:j.value),1)]),t("div",null,[t("div",is,[u(c(oe),{class:"w-3.5 h-3.5"}),e[26]||(e[26]=p(" Est. Budget ",-1))]),t("div",ns,d(me.value),1)]),t("div",null,[t("div",ls,[u(c(se),{class:"w-3.5 h-3.5"}),e[27]||(e[27]=p(" Delivery Date ",-1))]),t("div",ds,d(a.value.deliveryDate),1)])]),t("div",cs,[t("div",us,[t("div",gs,[u(c(Ce),{class:"w-4 h-4"}),e[28]||(e[28]=p(" Deadline ",-1))]),t("div",ms,d(a.value.deadline),1)]),t("div",ps,[t("div",vs,[u(c(qe),{class:"w-4 h-4"}),e[29]||(e[29]=p(" Department ",-1))]),t("div",xs,d(a.value.department),1)])]),t("div",bs,[t("button",{class:"flex-grow bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold py-2.5 rounded-lg shadow-sm transition-colors flex items-center justify-center gap-2",onClick:e[2]||(e[2]=(...o)=>r.openBidModal&&r.openBidModal(...o))},[u(c(je),{class:"w-4 h-4"}),e[30]||(e[30]=p(" Submit Your Bid ",-1))]),t("button",{onClick:ue,class:"p-2.5 bg-white border border-gray-200 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors shadow-sm",title:"Ask a Query"},[u(c(De),{class:"w-5 h-5"})])]),W.value?(l(),n("div",hs,[t("a",{href:W.value,target:"_blank",class:"w-full bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 text-sm font-semibold py-2.5 rounded-lg transition-colors flex items-center justify-center gap-2 cursor-pointer no-underline"},[u(c(V),{class:"w-4 h-4 text-gray-500"}),e[31]||(e[31]=p(" Download BOQ ",-1))],8,ys)])):v("",!0)]),a.value.liveBidding?(l(),n("div",fs,[e[37]||(e[37]=K('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2 px-2.5 py-1 bg-red-50 rounded-full border border-red-100"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span><span class="text-[10px] font-bold text-red-600 uppercase tracking-wider">Live Bidding Active</span></div><div class="text-[10px] text-gray-400 font-medium italic"> Updated 0s ago </div></div>',1)),t("div",_s,[e[33]||(e[33]=t("div",{class:"text-xs text-gray-500 font-medium mb-1 uppercase tracking-wider"},"Current Lowest Bid",-1)),t("div",ws,d(ve.value),1),m.value.length>0?(l(),n("div",ks,[u(c(ae),{class:"w-3 h-3"}),p(" ₹"+d((a.value.estBudget-Math.min(...m.value.map(o=>o.total))).toLocaleString("en-IN"))+" below budget ",1)])):v("",!0)]),t("div",Bs,[e[35]||(e[35]=t("label",{class:"text-xs font-semibold text-gray-700 mb-2 block"},"Enter Your Bid Amount",-1)),t("div",Ds,[t("div",Ss,[e[34]||(e[34]=t("span",{class:"absolute left-3 top-2.5 text-gray-400"},"₹",-1)),Se(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>h.value=o),type:"number",class:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-400 focus:border-amber-400",placeholder:"Enter amount"},null,512),[[Me,h.value]])]),t("button",{onClick:be,disabled:!h.value||h.value<=0||y.value,class:T(["px-4 py-2 bg-orange-400 text-white rounded-lg font-medium transition-all flex items-center gap-2",!h.value||h.value<=0||y.value||h.value>H.value?"opacity-40 cursor-not-allowed pointer-events-none select-none":"opacity-100 hover:bg-orange-500 active:scale-95"])},[y.value?(l(),n("span",Ls,"Placing...")):(l(),n(N,{key:1},[p(" Bid ")],64))],10,Ms)]),t("div",Ts,[h.value>H.value?(l(),n("p",Ns,[u(c(te),{class:"w-3 h-3"}),p(" Must be ₹"+d(H.value.toLocaleString("en-IN"))+" or less to qualify ",1)])):v("",!0)]),t("button",{onClick:e[4]||(e[4]=o=>h.value=z.value),disabled:z.value<=0,class:"w-full py-1.5 border border-gray-200 rounded-lg flex items-center justify-center gap-2 text-gray-700 hover:bg-gray-50 transition-colors text-sm disabled:opacity-50"},[u(i,{class:"w-4 h-4 text-gray-500"}),p(" Quick bid: ₹"+d(z.value.toLocaleString("en-IN")),1)],8,Cs)]),t("div",qs,[e[36]||(e[36]=t("h4",{class:"text-xs font-bold text-gray-900 mb-4 uppercase tracking-wider"},"Recent Bid Activity",-1)),m.value.length===0?(l(),n("div",js," No bids placed yet. Be the first! ")):v("",!0),(l(!0),n(N,null,A(m.value,(o,x)=>(l(),n("div",{key:x,class:T(["flex items-center justify-between py-3 border-b border-gray-50 last:border-0",{"bg-green-50 -mx-2 px-3 rounded-lg shadow-sm":x===0}])},[t("div",As,[t("span",{class:T(["font-bold text-sm",x===0?"text-green-700":"text-gray-700"])},d(o.supplier===$.value?o.supplier:"Masked Supplier"),3),t("span",Fs,d(o.time||"Just now"),1)]),t("div",Is,[t("div",{class:T(["font-bold",x===0?"text-green-600":"text-gray-900"])}," ₹"+d(new Intl.NumberFormat("en-IN").format(o.total)),3),x===0?(l(),n("span",Rs,"Current L1")):v("",!0)])],2))),128))])])):v("",!0),e[38]||(e[38]=t("div",{class:"bg-indigo-900 rounded-xl p-6 text-white text-center"},[t("h4",{class:"font-bold text-sm mb-2"},"Need Help?"),t("p",{class:"text-xs text-indigo-200 mb-4 leading-relaxed"},"Have questions about this tender? Contact our support team."),t("button",{class:"w-full bg-white text-indigo-900 text-xs font-bold py-2 rounded-lg shadow-sm hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2"}," Contact Support ")],-1))])])])])):(l(),n("div",$e,[u(c(te),{class:"w-12 h-12 text-red-500 mb-4"}),e[8]||(e[8]=t("h3",{class:"text-lg font-bold text-gray-900"},"Tender Not Found",-1)),e[9]||(e[9]=t("p",{class:"text-gray-500 mt-2 max-w-md"},"The tender you are looking for does not exist or you do not have permission to view it.",-1)),t("button",{onClick:e[0]||(e[0]=o=>c(k).push("/tenders")),class:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"},"Back to Tenders")]))])}}};export{Gs as default};
//# sourceMappingURL=TenderDetail-9KLXAGtf.js.map
