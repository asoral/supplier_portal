{"version":3,"file":"Catalog-Bv93Ec0R.js","sources":["../../../../supplier-portal/src/pages/Catalog.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useAuthStore } from '../stores/auth'\nimport { \n  Package, Plus, Search, Filter, Edit2, Trash2, \n  TrendingUp, Clock, CheckCircle, AlertCircle, X \n} from 'lucide-vue-next'\n\n// --- State ---\nconst activeTab = ref('My Catalog')\nconst tabs = ['My Catalog', 'Portal Items']\nconst searchQuery = ref('')\nconst loading = ref(true)\nconst products = ref([]) \nconst currentSupplier = ref('')\n\n// --- Modal State (ONLY ONE DECLARATION HERE) ---\nconst isAddProductModalOpen = ref(false)\nconst isEditing = ref(false)\nconst newProduct = ref({ \n   id: '',\n  name: '', \n  sku: '', \n  category: '', \n  unit: '', \n  price: 0, \n  tax: '', \n  moq: '', \n  leadTime: '', \n  description: '' \n})\n\nconst openEditModal = (product) => {\n  isEditing.value = true;\n  \n  newProduct.value = {\n    id: product.id, \n    name: product.name,\n    sku: product.sku,\n    category: product.category,\n    unit: product.unit || 'Nos',\n    price: product.price,\n    tax: product.tax,\n    moq: product.min_order_qty || 1,\n    leadTime: item.lead_time_days || 'N/A',\n    description: product.description\n  };\n  \n  isAddProductModalOpen.value = true;\n};\n\n// --- Fetch Data ---\nconst authStore = useAuthStore()\nconst { secureFetch } = authStore\n\n// --- Fetch Data ---\nconst fetchProducts = async () => {\n  loading.value = true;\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.get_catalog_items');\n    if (!response.ok) throw new Error('Network response was not ok');\n    const data = await response.json();\n\n    if (data && data.message) {\n      products.value = data.message.items || [];\n      currentSupplier.value = data.message.current_supplier || '';\n    }\n  } catch (error) {\n    console.error(\"Failed to load products:\", error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchProducts();\n});\n\n// --- Computed Filtering ---\nconst filteredProducts = computed(() => {\n  if (!products.value) return [];\n  return products.value.filter(item => {\n    const matchesSearch = !searchQuery.value || \n      item.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\n      item.sku?.toLowerCase().includes(searchQuery.value.toLowerCase());\n\n    if (!matchesSearch) return false;\n\n    if (activeTab.value === 'My Catalog') {\n      return item.is_my_item === true;\n    } else {\n      return item.is_purchase_item == 1 && item.is_my_item === false;\n    }\n  });\n});\n\n// --- Actions ---\nconst openAddModal = () => {\n  // Check auth first\n  if (!authStore.user) {\n      alert(\"Please login to manage products.\");\n      return;\n  }\n  isEditing.value = false;\n  newProduct.value = { id: '', name: '', sku: '', category: '', unit: '', price: 0, tax: '', moq: '', leadTime: '', description: '' };\n  isAddProductModalOpen.value = true;\n};\n\nconst closeAddModal = () => {\n  isAddProductModalOpen.value = false;\n};\n\nconst submitProduct = async () => {\n  if (!newProduct.value.name) {\n    alert(\"Please enter a product name\");\n    return;\n  }\n\n  try {\n    loading.value = true;\n    \n    // Choose the correct API endpoint based on the mode\n    const method = isEditing.value \n      ? '/api/method/supplier_portal.api.update_supplier_item' \n      : '/api/method/supplier_portal.api.create_supplier_item';\n\n    const response = await secureFetch(method, {\n      method: 'POST',\n      body: JSON.stringify(newProduct.value) \n    });\n\n    const data = await response.json();\n    \n    if (data.message === \"success\") {\n      closeAddModal();\n      await fetchProducts(); // Refresh catalog to show updated info\n      alert(isEditing.value ? \"Product updated successfully!\" : \"Product added successfully!\");\n    } else {\n      alert(\"Error: \" + (data.message || \"Failed to save product\"));\n    }\n  } catch (error) {\n    console.error(\"Submission failed:\", error);\n    alert(\"An error occurred while saving the product.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst addToMyCatalog = async (product) => {\n  if (!authStore.user) {\n      alert(\"Please login to add items to your catalog.\");\n      return;\n  }\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.add_to_catalog', {\n      method: 'POST',\n      body: JSON.stringify({ item_id: product.id })\n    });\n    const data = await response.json();\n    if (data.message === \"success\") {\n      product.is_my_item = true; // Moves item to 'My Catalog' instantly\n      alert(`${product.name} added to your catalog!`);\n    } else {\n       alert(\"Failed: \" + (data.message || \"Unknown error\"));\n    }\n  } catch (error) {\n    console.error(\"Failed to add item:\", error);\n  }\n};\n\nconst deleteProduct = async (productId) => {\n  if (!confirm(\"Are you sure you want to remove this item?\")) return;\n\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.remove_from_catalog', {\n      method: 'POST',\n      body: JSON.stringify({ item_id: productId }) // This matches the Python argument\n    });\n    \n    const data = await response.json();\n    if (data.message === \"success\") {\n      await fetchProducts(); // Refresh the list\n    }\n  } catch (err) {\n    console.error(\"Delete request failed:\", err);\n  }\n};\n\n// --- Stats ---\nconst stats = computed(() => [\n  { \n    name: 'Total Products', \n    value: products.value.filter(p => p.is_my_item).length, \n    icon: Package, color: 'text-indigo-600', bg: 'bg-indigo-50' \n  },\n  { \n    name: 'Active Items', \n    value: products.value.filter(p => p.is_my_item && p.status === 'active').length, \n    icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50' \n  },\n  { \n    name: 'Pending Approval', \n    value: products.value.filter(p => p.is_my_item && p.status === 'pending').length, \n    icon: Clock, color: 'text-orange-600', bg: 'bg-orange-50' \n  },\n  { \n    name: 'Matched Tenders', \n    value: products.value.reduce((acc, p) => p.is_my_item ? acc + (p.matches || 0) : acc, 0), \n    icon: TrendingUp, color: 'text-blue-600', bg: 'bg-blue-50' \n  },\n]);\n</script>\n\n<template>\n  <div class=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8\">\n    <div class=\"flex items-center justify-between mb-8\">\n      <div>\n        <h1 class=\"text-3xl font-bold tracking-tight text-gray-900\">Product Catalog</h1>\n        <p class=\"mt-1 text-sm text-gray-500\">Manage your product catalog and pricing.</p>\n      </div>\n      <button @click=\"openAddModal\" class=\"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 flex items-center gap-2\">\n         <Plus class=\"h-4 w-4\" /> Add Product\n      </button>\n    </div>\n\n    <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-4 mb-8\">\n       <div v-for=\"stat in stats\" :key=\"stat.name\" class=\"rounded-lg bg-white px-4 py-5 shadow sm:p-6 border border-gray-100 flex items-center gap-4\">\n          <div :class=\"[stat.bg, 'rounded-md p-3']\">\n             <component :is=\"stat.icon\" :class=\"[stat.color, 'h-6 w-6']\" />\n          </div>\n          <div>\n             <dt class=\"truncate text-sm font-medium text-gray-500\">{{ stat.name }}</dt>\n             <dd class=\"mt-1 text-2xl font-semibold tracking-tight text-gray-900\">{{ stat.value }}</dd>\n          </div>\n       </div>\n    </div>\n\n    <div class=\"mb-6\">\n       <div class=\"flex space-x-2\">\n          <button\n             v-for=\"tab in tabs\"\n             :key=\"tab\"\n             @click=\"activeTab = tab\"\n             :class=\"[\n                activeTab === tab \n                   ? 'bg-indigo-50 text-indigo-700 ring-1 ring-inset ring-indigo-700/10 font-semibold' \n                   : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50',\n                'rounded-md px-4 py-2 text-sm font-medium transition-colors'\n             ]\"\n          >\n             {{ tab }}\n          </button>\n       </div>\n    </div>\n\n    <div class=\"flex flex-col sm:flex-row gap-4 mb-6\">\n       <div class=\"relative flex-grow\">\n          <div class=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\">\n             <Search class=\"h-4 w-4 text-gray-400\" />\n          </div>\n          <input \n            v-model=\"searchQuery\"\n            type=\"text\" \n            class=\"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 shadow-sm\"\n            placeholder=\"Search products...\" \n          />\n       </div>\n       <button class=\"inline-flex items-center justify-center gap-2 rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\">\n          <Filter class=\"h-4 w-4 text-gray-500\" />\n          Filters\n       </button>\n    </div>\n\n    <div v-if=\"loading\" class=\"flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-200\">\n       <div class=\"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mb-4\"></div>\n       <p class=\"text-gray-500\">Fetching products...</p>\n    </div>\n\n    <div v-else class=\"space-y-4\">\n       <div v-if=\"filteredProducts.length === 0\" class=\"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200\">\n          <Package class=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\n          <h3 class=\"text-sm font-semibold text-gray-900\">No products found</h3>\n          <p class=\"mt-1 text-sm text-gray-500\">Try adjusting your search or filters.</p>\n       </div>\n\n      <div v-for=\"product in filteredProducts\" :key=\"product.id\">\n          <div v-if=\"activeTab === 'My Catalog'\" class=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow\">\n             <div class=\"flex flex-col lg:flex-row gap-6\">\n                <div class=\"flex-shrink-0\">\n                   <div class=\"h-16 w-16 rounded-lg bg-gray-50 flex items-center justify-center border border-gray-100\">\n                      <Package class=\"h-8 w-8 text-gray-400\" />\n                   </div>\n                </div>\n\n                <div class=\"flex-grow\">\n                   <div class=\"flex flex-wrap items-center gap-2 mb-1\">\n                      <h3 class=\"text-lg font-bold text-gray-900\">{{ product.name }}</h3>\n                      <span class=\"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset bg-green-50 text-green-700 ring-green-600/20\">\n                         {{ product.status }}\n                      </span>\n                      <span v-if=\"product.matches\" class=\"inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10\">\n                         <TrendingUp class=\"h-3 w-3\" /> {{ product.matches }} matches\n                      </span>\n                   </div>\n                   <div class=\"text-sm text-gray-500 mb-2\">\n                       <span class=\"font-bold text-gray-700\">SKU:</span> {{ product.sku || 'N/A' }}\n                       <span class=\"mx-2 text-gray-300\">•</span>\n                       <span class=\"font-bold text-gray-700\">Category:</span> {{ product.category }}\n                       <span class=\"mx-2 text-gray-300\">•</span>\n                       <span class=\"font-bold text-gray-700\">Unit:</span> {{ product.unit || 'Nos' }}\n                   </div>\n                   <p class=\"text-sm text-gray-600 leading-relaxed\">{{ product.description }}</p>\n                </div>\n\n                <div class=\"flex lg:flex-col items-center lg:items-end justify-between lg:justify-center gap-1 min-w-[180px] border-t lg:border-t-0 lg:border-l border-gray-100 pt-4 lg:pt-0 lg:pl-8\">\n                    <div class=\"text-right\">\n                       <div class=\"text-2xl font-bold text-gray-900\">₹{{ Number(product.price).toLocaleString() }}</div>\n                       <div class=\"text-xs text-gray-400 font-medium\">+ {{ product.tax }}</div>\n                    </div>\n                    <div class=\"lg:mt-4 text-right text-sm text-gray-500 leading-tight\">\n                       <div class=\"flex justify-end gap-1\">\n                           <span class=\"text-gray-400\">Lead:</span> \n                           <span class=\"font-medium text-gray-700\">{{ product.leadTime }} </span>\n                        </div>\n                       <div class=\"flex justify-end gap-1\">\n                         <span class=\"text-gray-400\">MOQ:</span> \n                         <span class=\"font-medium text-gray-700\">{{ product.moq }}</span>\n                       </div>\n                    </div>\n                    <div class=\"flex gap-2 mt-4\">\n                        <button @click=\"openEditModal(product)\" class=\"p-2 text-gray-400 hover:text-indigo-600 rounded-md hover:bg-gray-50 transition-colors\">\n                           <Edit2 class=\"h-4 w-4\" />\n                        </button>\n                        <button @click=\"deleteProduct(product.id)\" class=\"p-2 text-gray-400 hover:text-red-600 rounded-md hover:bg-gray-50 transition-colors\">\n                          <Trash2 class=\"h-4 w-4\" />\n                       </button>\n                    </div>\n                </div>\n             </div>\n          </div>\n\n          <div v-else class=\"rounded-lg border border-gray-200 bg-white p-4 shadow-sm flex items-center gap-4 hover:border-indigo-200 transition-colors\">\n             <div class=\"h-12 w-12 rounded bg-gray-50 flex items-center justify-center flex-shrink-0\">\n                <Package class=\"h-6 w-6 text-gray-400\" />\n             </div>\n             <div class=\"flex-grow\">\n                <h3 class=\"text-sm font-bold text-gray-900\">{{ product.name }}</h3>\n                <p class=\"text-xs text-gray-500\">Category: {{ product.category }} • Unit: {{ product.unit }}</p>\n             </div>\n            <button @click=\"addToMyCatalog(product)\" class=\"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-semibold text-gray-700 hover:bg-gray-50 transition whitespace-nowrap\">\n               <Plus class=\"h-4 w-4\" /> Add to My Catalog\n            </button>\n          </div>\n       </div>\n    </div>\n\n    <div v-if=\"isAddProductModalOpen\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n      <div class=\"w-full max-w-2xl rounded-xl bg-white shadow-2xl overflow-hidden\">\n        <div class=\"flex items-center justify-between border-b border-gray-100 px-6 py-4\">\n          <h3 class=\"text-lg font-bold text-gray-900\">{{ isEditing ? 'Edit Product' : 'Add New Product' }}</h3>\n          <button @click=\"closeAddModal\" class=\"text-gray-400 hover:text-gray-500\">\n            <X class=\"h-5 w-5\" />\n          </button>\n        </div>\n        <div class=\"p-6 max-h-[80vh] overflow-y-auto\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Product Name</label>\n              <input v-model=\"newProduct.name\" type=\"text\" placeholder=\"Enter product name\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">SKU</label>\n              <input v-model=\"newProduct.sku\" type=\"text\" placeholder=\"Enter SKU\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Category</label>\n              <input v-model=\"newProduct.category\" type=\"text\" placeholder=\"e.g. Hardware\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Unit of Measure</label>\n              <input v-model=\"newProduct.unit\" type=\"text\" placeholder=\"e.g. Nos\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Base Price (₹)</label>\n              <input v-model=\"newProduct.price\" type=\"number\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">GST Rate (%)</label>\n              <select v-model=\"newProduct.tax\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\">\n                <option value=\"18%\">18%</option>\n                <option value=\"12%\">12%</option>\n                <option value=\"5%\">5%</option>\n              </select>\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">MOQ</label>\n              <input v-model=\"newProduct.moq\" type=\"number\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Lead Time (Days)</label>\n              <input v-model=\"newProduct.leadTime\" type=\"text\" placeholder=\"Delivery lead time\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-2\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Specifications</label>\n              <textarea v-model=\"newProduct.description\" rows=\"3\" placeholder=\"Enter product specifications...\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"></textarea>\n            </div>\n          </div>\n        </div>\n        <div class=\"bg-gray-50 px-6 py-4 flex justify-end gap-3\">\n          <button @click=\"closeAddModal\" class=\"px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-md\">Cancel</button>\n          <button @click=\"submitProduct\" class=\"px-6 py-2 bg-indigo-600 text-sm font-semibold text-white rounded-md hover:bg-indigo-500 shadow-sm\">\n            {{ isEditing ? 'Update Catalog' : 'Add to Catalog' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>"],"names":["activeTab","ref","tabs","searchQuery","loading","products","currentSupplier","isAddProductModalOpen","isEditing","newProduct","openEditModal","product","authStore","useAuthStore","secureFetch","fetchProducts","__async","response","data","error","onMounted","filteredProducts","computed","item","_a","_b","openAddModal","closeAddModal","submitProduct","method","addToMyCatalog","deleteProduct","productId","err","stats","p","Package","CheckCircle","Clock","acc","TrendingUp","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_unref","Plus","_hoisted_3","_Fragment","_renderList","stat","_normalizeClass","_createBlock","_resolveDynamicComponent","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_hoisted_7","tab","$event","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","Search","_hoisted_12","Filter","_hoisted_13","_cache","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_createTextVNode","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","Edit2","Trash2","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","X","_hoisted_49","_hoisted_50","_hoisted_51","_vModelText","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_vModelSelect","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60"],"mappings":"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"}