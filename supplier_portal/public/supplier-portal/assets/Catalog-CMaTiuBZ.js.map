{"version":3,"file":"Catalog-CMaTiuBZ.js","sources":["../../../../supplier-portal/src/pages/Catalog.vue"],"sourcesContent":["<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport { useAuthStore } from '../stores/auth'\nimport { \n  Package, Plus, Search, Filter, Edit2, Trash2, \n  TrendingUp, Clock, CheckCircle, AlertCircle, X \n} from 'lucide-vue-next'\n\n// --- State ---\nconst activeTab = ref('My Catalog')\nconst tabs = ['My Catalog', 'Portal Items']\nconst searchQuery = ref('')\nconst loading = ref(true)\nconst products = ref([]) \nconst currentSupplier = ref('')\n\n// --- Modal State (ONLY ONE DECLARATION HERE) ---\nconst isAddProductModalOpen = ref(false)\nconst isEditing = ref(false)\nconst newProduct = ref({ \n   id: '',\n  name: '', \n  sku: '', \n  category: '', \n  unit: '', \n  price: 0, \n  tax: '', \n  moq: '', \n  leadTime: '', \n  description: '' \n})\n\nconst openEditModal = (item) => { // Using 'item' here\n  isEditing.value = true;\n  \n  newProduct.value = {\n    id: item.id, \n    name: item.name,\n    sku: item.sku,\n    category: item.category,\n    unit: item.unit || 'Nos',\n    price: item.price,\n    tax: item.tax,\n    moq: item.min_order_qty || 1,\n    // This was the line causing the error; it now correctly references 'item'\n    leadTime: item.lead_time_days || 'N/A', \n    description: item.description\n  };\n  \n  isAddProductModalOpen.value = true;\n};\n\n// --- Fetch Data ---\nconst authStore = useAuthStore()\nconst { secureFetch } = authStore\n\n// --- Fetch Data ---\nconst fetchProducts = async () => {\n  loading.value = true;\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.get_catalog_items');\n    if (!response.ok) throw new Error('Network response was not ok');\n    const data = await response.json();\n\n    if (data && data.message) {\n      products.value = data.message.items || [];\n      currentSupplier.value = data.message.current_supplier || '';\n    }\n  } catch (error) {\n    console.error(\"Failed to load products:\", error);\n  } finally {\n    loading.value = false;\n  }\n};\n\nonMounted(() => {\n  fetchProducts();\n});\n\n// --- Computed Filtering ---\nconst filteredProducts = computed(() => {\n  if (!products.value) return [];\n  return products.value.filter(item => {\n    const matchesSearch = !searchQuery.value || \n      item.name?.toLowerCase().includes(searchQuery.value.toLowerCase()) ||\n      item.sku?.toLowerCase().includes(searchQuery.value.toLowerCase());\n\n    if (!matchesSearch) return false;\n\n    if (activeTab.value === 'My Catalog') {\n      return item.is_my_item === true;\n    } else {\n      return item.is_purchase_item == 1 && item.is_my_item === false;\n    }\n  });\n});\n\nconst openAddModal = () => {\n  if (!authStore.user) {\n      alert(\"Please login to manage products.\");\n      return;\n  }\n  isEditing.value = false;\n  // Resetting all fields, especially id, to ensure a fresh entry\n  newProduct.value = { \n    id: '', \n    name: '', \n    sku: '', \n    category: '', \n    unit: '', \n    price: 0, \n    tax: '', \n    moq: '', \n    leadTime: '', \n    description: '' \n  };\n  isAddProductModalOpen.value = true;\n};\n\nconst closeAddModal = () => {\n  isAddProductModalOpen.value = false;\n};\n\nconst submitProduct = async () => {\n  if (!newProduct.value.name || !newProduct.value.price) {\n    alert(\"Please enter both product name and price\");\n    return;\n  }\n\n  try {\n    loading.value = true;\n    \n    // We only use the catalog update path now\n    const method = '/api/method/supplier_portal.api.update_catalog_item';\n\n    const payload = {\n      item_id: newProduct.value.id, \n      name: newProduct.value.name,\n      price: newProduct.value.price,\n      moq: newProduct.value.moq,\n      leadTime: newProduct.value.leadTime,\n      description: newProduct.value.description,\n      tax: newProduct.value.tax \n    };\n\n    const response = await secureFetch(method, {\n      method: 'POST',\n      body: JSON.stringify(payload) \n    });\n\n    const result = await response.json();\n    \n    // Result handling based on Frappe return\n    if (result.message === \"success\") {\n      closeAddModal();\n      await fetchProducts(); // Refresh the list\n      alert(\"Product updated successfully!\");\n    } else {\n      alert(\"Error: \" + (result.message?.message || \"Failed to update product\"));\n    }\n  } catch (error) {\n    console.error(\"Update failed:\", error);\n    alert(\"An error occurred during submission.\");\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst addToMyCatalog = async (product) => {\n  if (!authStore.user) {\n      alert(\"Please login to add items to your catalog.\");\n      return;\n  }\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.add_to_catalog', {\n      method: 'POST',\n      body: JSON.stringify({ item_id: product.id })\n    });\n    const data = await response.json();\n    if (data.message === \"success\") {\n      product.is_my_item = true; // Moves item to 'My Catalog' instantly\n      alert(`${product.name} added to your catalog!`);\n    } else {\n       alert(\"Failed: \" + (data.message || \"Unknown error\"));\n    }\n  } catch (error) {\n    console.error(\"Failed to add item:\", error);\n  }\n};\n\nconst deleteProduct = async (productId) => {\n  if (!confirm(\"Are you sure you want to remove this item?\")) return;\n\n  try {\n    const response = await secureFetch('/api/method/supplier_portal.api.remove_from_catalog', {\n      method: 'POST',\n      body: JSON.stringify({ item_id: productId }) // This matches the Python argument\n    });\n    \n    const data = await response.json();\n    if (data.message === \"success\") {\n      await fetchProducts(); // Refresh the list\n    }\n  } catch (err) {\n    console.error(\"Delete request failed:\", err);\n  }\n};\n\n// --- Stats ---\nconst stats = computed(() => [\n  { \n    name: 'Total Products', \n    value: products.value.filter(p => p.is_my_item).length, \n    icon: Package, color: 'text-indigo-600', bg: 'bg-indigo-50' \n  },\n  { \n    name: 'Active Items', \n    value: products.value.filter(p => p.is_my_item && p.status === 'active').length, \n    icon: CheckCircle, color: 'text-green-600', bg: 'bg-green-50' \n  },\n  { \n    name: 'Pending Approval', \n    value: products.value.filter(p => p.is_my_item && p.status === 'pending').length, \n    icon: Clock, color: 'text-orange-600', bg: 'bg-orange-50' \n  },\n  { \n    name: 'Matched Tenders', \n    value: products.value.reduce((acc, p) => p.is_my_item ? acc + (p.matches || 0) : acc, 0), \n    icon: TrendingUp, color: 'text-blue-600', bg: 'bg-blue-50' \n  },\n]);\n</script>\n\n<template>\n  <div class=\"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8\">\n    <div class=\"flex items-center justify-between mb-8\">\n      <div>\n        <h1 class=\"text-3xl font-bold tracking-tight text-gray-900\">Product Catalog</h1>\n        <p class=\"mt-1 text-sm text-gray-500\">Manage your product catalog and pricing.</p>\n      </div>\n    </div>\n\n    <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-4 mb-8\">\n       <div v-for=\"stat in stats\" :key=\"stat.name\" class=\"rounded-lg bg-white px-4 py-5 shadow sm:p-6 border border-gray-100 flex items-center gap-4\">\n          <div :class=\"[stat.bg, 'rounded-md p-3']\">\n             <component :is=\"stat.icon\" :class=\"[stat.color, 'h-6 w-6']\" />\n          </div>\n          <div>\n             <dt class=\"truncate text-sm font-medium text-gray-500\">{{ stat.name }}</dt>\n             <dd class=\"mt-1 text-2xl font-semibold tracking-tight text-gray-900\">{{ stat.value }}</dd>\n          </div>\n       </div>\n    </div>\n\n    <div class=\"mb-6\">\n       <div class=\"flex space-x-2\">\n          <button\n             v-for=\"tab in tabs\"\n             :key=\"tab\"\n             @click=\"activeTab = tab\"\n             :class=\"[\n                activeTab === tab \n                   ? 'bg-indigo-50 text-indigo-700 ring-1 ring-inset ring-indigo-700/10 font-semibold' \n                   : 'text-gray-500 hover:text-gray-700 hover:bg-gray-50',\n                'rounded-md px-4 py-2 text-sm font-medium transition-colors'\n             ]\"\n          >\n             {{ tab }}\n          </button>\n       </div>\n    </div>\n\n    <div class=\"flex flex-col sm:flex-row gap-4 mb-6\">\n       <div class=\"relative flex-grow\">\n          <div class=\"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3\">\n             <Search class=\"h-4 w-4 text-gray-400\" />\n          </div>\n          <input \n            v-model=\"searchQuery\"\n            type=\"text\" \n            class=\"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 shadow-sm\"\n            placeholder=\"Search products...\" \n          />\n       </div>\n       <button class=\"inline-flex items-center justify-center gap-2 rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50\">\n          <Filter class=\"h-4 w-4 text-gray-500\" />\n          Filters\n       </button>\n    </div>\n\n    <div v-if=\"loading\" class=\"flex flex-col items-center justify-center py-20 bg-white rounded-xl border border-gray-200\">\n       <div class=\"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mb-4\"></div>\n       <p class=\"text-gray-500\">Fetching products...</p>\n    </div>\n\n    <div v-else class=\"space-y-4\">\n       <div v-if=\"filteredProducts.length === 0\" class=\"text-center py-20 bg-white rounded-xl border-2 border-dashed border-gray-200\">\n          <Package class=\"mx-auto h-12 w-12 text-gray-300 mb-4\" />\n          <h3 class=\"text-sm font-semibold text-gray-900\">No products found</h3>\n          <p class=\"mt-1 text-sm text-gray-500\">Try adjusting your search or filters.</p>\n       </div>\n\n      <div v-for=\"product in filteredProducts\" :key=\"product.id\">\n          <div v-if=\"activeTab === 'My Catalog'\" class=\"rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-shadow\">\n             <div class=\"flex flex-col lg:flex-row gap-6\">\n                <div class=\"flex-shrink-0\">\n                   <div class=\"h-16 w-16 rounded-lg bg-gray-50 flex items-center justify-center border border-gray-100\">\n                      <Package class=\"h-8 w-8 text-gray-400\" />\n                   </div>\n                </div>\n\n                <div class=\"flex-grow\">\n                   <div class=\"flex flex-wrap items-center gap-2 mb-1\">\n                      <h3 class=\"text-lg font-bold text-gray-900\">{{ product.name }}</h3>\n                      <span class=\"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset bg-green-50 text-green-700 ring-green-600/20\">\n                         {{ product.status }}\n                      </span>\n                      <span v-if=\"product.matches\" class=\"inline-flex items-center gap-1 rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10\">\n                         <TrendingUp class=\"h-3 w-3\" /> {{ product.matches }} matches\n                      </span>\n                   </div>\n                   <div class=\"text-sm text-gray-500 mb-2\">\n                       <span class=\"font-bold text-gray-700\">SKU:</span> {{ product.sku || 'N/A' }}\n                       <span class=\"mx-2 text-gray-300\">•</span>\n                       <span class=\"font-bold text-gray-700\">Category:</span> {{ product.category }}\n                       <span class=\"mx-2 text-gray-300\">•</span>\n                       <span class=\"font-bold text-gray-700\">Unit:</span> {{ product.unit || 'Nos' }}\n                   </div>\n                   <p class=\"text-sm text-gray-600 leading-relaxed\">{{ product.description }}</p>\n                </div>\n\n                <div class=\"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4 min-w-[320px] border-t lg:border-t-0 lg:border-l border-gray-100 pt-4 lg:pt-0 lg:pl-8\">\n    \n    <div class=\"text-right flex-shrink-0\">\n        <div class=\"text-xl font-bold text-gray-900\">₹{{ Number(product.price).toLocaleString() }}</div>\n        <div class=\"text-[14px] text-gray-400 font-medium\">+ {{ product.tax }}</div>\n    </div>\n\n    <div class=\"text-right text-[14px] text-gray-500 leading-tight min-w-[80px]\">\n        <div class=\"flex justify-end gap-1\">\n            <span class=\"text-gray-400\">Lead:</span> \n            <span class=\"font-medium text-gray-700\">{{ product.leadTime }}</span>\n        </div>\n        <div class=\"flex justify-end gap-1\">\n            <span class=\"text-gray-400\">MOQ:</span> \n            <span class=\"font-medium text-gray-700\">{{ product.moq }}</span>\n        </div>\n    </div>\n\n   <div class=\"flex lg:flex-row gap-1 items-center\">\n    <button @click=\"openEditModal(product)\" \n            class=\"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors\">\n        <Edit2 class=\"h-4 w-4\" />\n    </button>\n    \n    <button @click=\"deleteProduct(product.id)\" \n            class=\"p-2 text-red-500 hover:bg-red-50 rounded-md transition-colors\">\n        <Trash2 class=\"h-4 w-4\" />\n    </button>\n</div>\n</div>\n\n             </div>\n          </div>\n\n          <div v-else class=\"rounded-lg border border-gray-200 bg-white p-4 shadow-sm flex items-center gap-4 hover:border-indigo-200 transition-colors\">\n             <div class=\"h-12 w-12 rounded bg-gray-50 flex items-center justify-center flex-shrink-0\">\n                <Package class=\"h-6 w-6 text-gray-400\" />\n             </div>\n             <div class=\"flex-grow\">\n                <h3 class=\"text-sm font-bold text-gray-900\">{{ product.name }}</h3>\n                <p class=\"text-xs text-gray-500\">Category: {{ product.category }} • Unit: {{ product.unit }}</p>\n             </div>\n            <button @click=\"addToMyCatalog(product)\" class=\"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-semibold text-gray-700 hover:bg-gray-50 transition whitespace-nowrap\">\n               <Plus class=\"h-4 w-4\" /> Add to My Catalog\n            </button>\n          </div>\n       </div>\n\n    </div>\n\n    <div v-if=\"isAddProductModalOpen\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4\">\n      <div class=\"w-full max-w-2xl rounded-xl bg-white shadow-2xl overflow-hidden\">\n        <div class=\"flex items-center justify-between border-b border-gray-100 px-6 py-4\">\n          <h3 class=\"text-lg font-bold text-gray-900\">{{ isEditing ? 'Edit Product' : 'Add New Product' }}</h3>\n          <button @click=\"closeAddModal\" class=\"text-gray-400 hover:text-gray-500\">\n            <X class=\"h-5 w-5\" />\n          </button>\n        </div>\n        <div class=\"p-6 max-h-[80vh] overflow-y-auto\">\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Product Name</label>\n              <input v-model=\"newProduct.name\" type=\"text\" placeholder=\"Enter product name\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">SKU</label>\n              <input v-model=\"newProduct.sku\" type=\"text\" placeholder=\"Enter SKU\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Category</label>\n              <input v-model=\"newProduct.category\" type=\"text\" placeholder=\"e.g. Hardware\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Unit of Measure</label>\n              <input v-model=\"newProduct.unit\" type=\"text\" placeholder=\"e.g. Nos\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Base Price (₹)</label>\n              <input v-model=\"newProduct.price\" type=\"number\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">GST Rate (%)</label>\n              <select v-model=\"newProduct.tax\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\">\n                <option value=\"18%\">18%</option>\n                <option value=\"12%\">12%</option>\n                <option value=\"5%\">5%</option>\n              </select>\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">MOQ</label>\n              <input v-model=\"newProduct.moq\" type=\"number\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-1\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Lead Time (Days)</label>\n              <input v-model=\"newProduct.leadTime\" type=\"text\" placeholder=\"Delivery lead time\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\" />\n            </div>\n            <div class=\"col-span-2\">\n              <label class=\"block text-xs font-bold uppercase tracking-wider text-gray-500 mb-1\">Specifications</label>\n              <textarea v-model=\"newProduct.description\" rows=\"3\" placeholder=\"Enter product specifications...\" class=\"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"></textarea>\n            </div>\n          </div>\n        </div>\n        <div class=\"bg-gray-50 px-6 py-4 flex justify-end gap-3\">\n          <button @click=\"closeAddModal\" class=\"px-4 py-2 text-sm font-semibold text-gray-700 hover:bg-gray-100 rounded-md\">Cancel</button>\n          <button @click=\"submitProduct\" class=\"px-6 py-2 bg-indigo-600 text-sm font-semibold text-white rounded-md hover:bg-indigo-500 shadow-sm\">\n            {{ isEditing ? 'Update Catalog' : 'Add to Catalog' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>"],"names":["activeTab","ref","tabs","searchQuery","loading","products","currentSupplier","isAddProductModalOpen","isEditing","newProduct","openEditModal","item","authStore","useAuthStore","secureFetch","fetchProducts","__async","response","data","error","onMounted","filteredProducts","computed","_a","_b","closeAddModal","submitProduct","method","payload","result","addToMyCatalog","product","deleteProduct","productId","err","stats","p","Package","CheckCircle","Clock","acc","TrendingUp","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_Fragment","_renderList","stat","_normalizeClass","_createBlock","_resolveDynamicComponent","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_hoisted_6","tab","$event","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_createVNode","_unref","Search","_hoisted_11","Filter","_hoisted_12","_cache","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_createTextVNode","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","Edit2","Trash2","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","Plus","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","X","_hoisted_48","_hoisted_49","_hoisted_50","_vModelText","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_vModelSelect","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59"],"mappings":"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"}