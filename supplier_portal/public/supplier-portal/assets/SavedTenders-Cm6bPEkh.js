var C=(B,m,i)=>new Promise((v,_)=>{var x=u=>{try{d(i.next(u))}catch(p){_(p)}},h=u=>{try{d(i.throw(u))}catch(p){_(p)}},d=u=>u.done?v(u.value):Promise.resolve(u.value).then(x,h);d((i=i.apply(B,m)).next())});import{m as y,B as w,A as R,y as $,p as j,a as c,b as t,e as g,f as b,u as n,t as r,g as V,F as S,r as T,q as O,v as E,o as l,n as k,h as q,i as G,k as N}from"./index-CDJ_LxkQ.js";import{t as M}from"./mosha-vue-toastify.es-L5e1gcZ0.js";import{C as A}from"./clock-DFxao2Vg.js";import{A as P}from"./arrow-right-DmmAjJ8S.js";import{S as D}from"./search-BkChqmeg.js";import{T as Q}from"./trash-2-ZH0DjuvW.js";import{E as U}from"./eye-DpUmIHT3.js";const X={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8"},z={class:"flex items-center justify-between mb-8"},J={class:"text-3xl font-bold tracking-tight text-gray-900 flex items-center gap-2"},H={class:"mt-1 text-sm text-gray-500"},I={class:"grid grid-cols-1 gap-4 sm:grid-cols-4 mb-8"},K={class:"truncate text-sm font-medium text-gray-500"},W={class:"mt-1 text-2xl font-semibold tracking-tight text-gray-900"},Y={class:"flex flex-col sm:flex-row gap-4 mb-6 items-center"},Z={class:"relative flex-grow w-full sm:w-auto"},ee={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},te={class:"flex space-x-2 bg-gray-100 p-1 rounded-lg"},se=["onClick"],oe={key:0,class:"text-center py-12"},ne={key:1,class:"text-center py-12 bg-white rounded-xl border-2 border-dashed border-gray-200"},ae={class:"mt-6"},re={key:2,class:"space-y-4"},le={class:"flex flex-col sm:flex-row justify-between gap-4"},ie={class:"flex-grow"},de={class:"flex items-center gap-2 mb-1"},ce=["onClick"],ue={class:"text-sm text-gray-500 mb-3"},ge={class:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600"},me={class:"flex items-center gap-1 font-semibold text-gray-900"},ve={class:"flex items-center gap-1"},pe={key:0,class:"text-red-600 text-xs font-medium flex items-center px-2 py-0.5 bg-red-50 rounded"},xe={class:"text-xs text-gray-400 mt-3 font-medium"},he={class:"flex items-center gap-3 self-start sm:self-center"},fe={class:"p-2 bg-indigo-50 rounded-md",title:"Tender is saved"},ye=["onClick"],be=["onClick"],_e=["onClick"],Ne={__name:"SavedTenders",setup(B){const m=V(),i=y([]),v=y("All"),_=["All","Active","Closed"],x=y(""),h=y(!0),d=y([{name:"Total Saved",value:"0",icon:w,color:"text-indigo-600",bg:"bg-indigo-50"},{name:"Active",value:"0",icon:A,color:"text-green-600",bg:"bg-green-50"},{name:"Closing Soon",value:"0",icon:A,color:"text-orange-600",bg:"bg-orange-50"},{name:"Alerts On",value:"0",icon:R,color:"text-blue-600",bg:"bg-blue-50"}]),u=()=>{i.value&&(d.value[0].value=i.value.length.toString(),d.value[1].value=i.value.filter(a=>a.status==="Active").length.toString(),d.value[2].value=i.value.filter(a=>a.status==="Active").length.toString(),d.value[3].value="0")},p=()=>C(this,null,function*(){h.value=!0;try{const e=(yield(yield fetch("/api/method/supplier_portal.api.get_saved_tenders",{method:"GET",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""}})).json()).message||[];i.value=e.map(o=>({saved_id:o.saved_id||o.name,id:o.id||o.rfq||"N/A",title:o.title||"Untitled Tender",status:o.status||"Active",category:o.category||"General",value:o.amount||o.total_budget||0,deadline:o.deadline||"N/A",savedOn:o.saved_on?new Date(o.saved_on).toLocaleDateString("en-GB"):"Recently"})),u()}catch(a){console.error("Fetch failed:",a)}finally{h.value=!1}}),L=a=>C(this,null,function*(){if(a&&confirm("Remove this tender from your saved list?"))try{(yield fetch("/api/method/frappe.client.delete",{method:"POST",headers:{"Content-Type":"application/json","X-Frappe-CSRF-Token":window.csrf_token||""},body:JSON.stringify({doctype:"Saved RFQ",name:a})})).ok&&(M("Tender removed",{type:"success"}),yield p())}catch(s){console.error("Delete error:",s)}}),F=$(()=>{const a=(x.value||"").toLowerCase();return(i.value||[]).filter(s=>{const o=(s.title||"").toLowerCase().includes(a)||s.id.toLowerCase().includes(a),f=v.value==="All"||s.status===v.value;return o&&f})});return j(()=>{p()}),(a,s)=>(l(),c("div",X,[t("div",z,[t("div",null,[t("h1",J,[g(n(w),{class:"h-8 w-8 text-indigo-600 fill-indigo-600"}),s[3]||(s[3]=b(" Saved Tenders ",-1))]),t("p",H,r(d.value[0].value)+" tenders saved • "+r(d.value[1].value)+" active ",1)]),t("button",{class:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 flex items-center gap-2 transition-colors",onClick:s[0]||(s[0]=e=>n(m).push("/tenders"))},[s[4]||(s[4]=b(" Browse More Tenders ",-1)),g(n(P),{class:"h-4 w-4"})])]),t("div",I,[(l(!0),c(S,null,T(d.value,e=>(l(),c("div",{key:e.name,class:"overflow-hidden rounded-lg bg-white px-4 py-5 shadow-sm border border-gray-100 flex items-center gap-4"},[t("div",{class:k([e.bg,"rounded-md p-3"])},[(l(),q(G(e.icon),{class:k([e.color,"h-6 w-6"])},null,8,["class"]))],2),t("div",null,[t("dt",K,r(e.name),1),t("dd",W,r(e.value),1)])]))),128))]),t("div",Y,[t("div",Z,[t("div",ee,[g(n(D),{class:"h-4 w-4 text-gray-400"})]),O(t("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>x.value=e),type:"text",class:"block w-full rounded-md border-0 py-2 pl-10 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6",placeholder:"Search saved tenders..."},null,512),[[E,x.value]])]),t("div",te,[(l(),c(S,null,T(_,e=>t("button",{key:e,onClick:o=>v.value=e,class:k([v.value===e?"bg-white text-gray-900 shadow":"text-gray-500 hover:text-gray-900","rounded-md px-3 py-1.5 text-sm font-medium transition-all"])},r(e),11,se)),64))])]),h.value?(l(),c("div",oe,[...s[5]||(s[5]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-500 font-medium"},"Loading saved tenders...",-1)])])):F.value.length===0?(l(),c("div",ne,[g(n(w),{class:"mx-auto h-12 w-12 text-gray-300"}),s[7]||(s[7]=t("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No saved tenders found",-1)),s[8]||(s[8]=t("p",{class:"mt-1 text-sm text-gray-500"},"Try adjusting your search or browse new tenders.",-1)),t("div",ae,[t("button",{onClick:s[2]||(s[2]=e=>n(m).push("/tenders")),class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"},[g(n(D),{class:"-ml-0.5 mr-1.5 h-5 w-5","aria-hidden":"true"}),s[6]||(s[6]=b(" Find Tenders ",-1))])])])):(l(),c("div",re,[(l(!0),c(S,null,T(F.value,e=>{var o;return l(),c("div",{key:e.id,class:"rounded-lg border border-gray-200 bg-white p-6 shadow-sm hover:shadow-md transition-all"},[t("div",le,[t("div",ie,[t("div",de,[t("h3",{class:"text-base font-semibold text-gray-900 hover:text-indigo-600 cursor-pointer",onClick:f=>n(m).push("/tenders/"+e.id)},r(e.title),9,ce),t("span",{class:k(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ring-1 ring-inset",e.status==="Active"?"bg-blue-50 text-blue-700 ring-blue-700/10":e.status==="Closing Soon"?"bg-orange-50 text-orange-700 ring-orange-600/20":"bg-gray-50 text-gray-600 ring-gray-500/10"])},r(e.status),3)]),t("p",ue,r(e.id)+" • "+r(e.category),1),t("div",ge,[t("span",me," ₹"+r(((o=e.value)==null?void 0:o.toLocaleString("en-IN"))||"0"),1),t("span",ve,[g(n(A),{class:"h-4 w-4 text-gray-400"}),b(" "+r(e.deadline),1)]),e.deadlineStatus?(l(),c("span",pe,r(e.deadlineStatus),1)):N("",!0)]),t("p",xe,"Saved on "+r(e.savedOn),1)]),t("div",he,[t("div",fe,[g(n(w),{class:"h-4 w-4 text-indigo-600 fill-indigo-600"})]),t("button",{onClick:f=>L(e.saved_id),class:"p-2 text-gray-400 hover:text-red-600 bg-gray-50 rounded-md hover:bg-red-50 transition-colors",title:"Remove from Saved"},[g(n(Q),{class:"h-4 w-4"})],8,ye),t("button",{onClick:f=>n(m).push("/tenders/"+e.id),class:"inline-flex items-center gap-1 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},[g(n(U),{class:"h-4 w-4"}),s[9]||(s[9]=b(" View Details ",-1))],8,be),e.status!=="Closed"?(l(),c("button",{key:0,onClick:f=>n(m).push("/tenders/"+e.id),class:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 transition-colors"}," Place Bid ",8,_e)):N("",!0)])])])}),128))]))]))}};export{Ne as default};
//# sourceMappingURL=SavedTenders-Cm6bPEkh.js.map
