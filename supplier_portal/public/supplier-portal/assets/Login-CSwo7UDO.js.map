{"version":3,"file":"Login-CSwo7UDO.js","sources":["../../../../supplier-portal/node_modules/lucide-vue-next/dist/esm/icons/lock.js","../../../../supplier-portal/src/pages/Login.vue"],"sourcesContent":["/**\n * @license lucide-vue-next v0.545.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lock = createLucideIcon(\"lock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n]);\n\nexport { Lock as default };\n//# sourceMappingURL=lock.js.map\n","<script setup>\nimport { ref, onMounted, watch } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { computed } from 'vue'\nimport { useAuthStore } from '../stores/auth'\nimport { Lock, Mail, Info } from 'lucide-vue-next'\n\nconst router = useRouter()\nconst authStore = useAuthStore()\n\nconst email = ref('supplier@techsolutions.com')\nconst password = ref('')\nconst loading = ref(false)\nconst errorMsg = ref('')\n\nconst redirectIfLoggedIn = () => {\n  if (authStore.isAuthenticated) {\n    router.push('/dashboard')\n  }\n}\n\nonMounted(() => {\n  redirectIfLoggedIn()\n})\n\nwatch(() => authStore.isAuthenticated, (newVal) => {\n  if (newVal) {\n    router.push('/dashboard')\n  }\n})\n\nconst handleLogin = async (e) => {\n  e.preventDefault()\n  loading.value = true\n  errorMsg.value = ''\n  try {\n     const user = await authStore.login({ email: email.value, password: password.value })\n     \n     // Handle redirect\n     const redirect = router.currentRoute.value.query.redirect\n     \n     // Force hard navigation to ensure session cookies are fully respected by the browser/server\n     // for any subsequent requests (including Desk /app).\n     // [FIX] Use Client-Side Routing (SPA) to prevent cookie race conditions.\n     // Forces the user to stay in the Portal context.\n     if (redirect && !redirect.includes('desk') && !redirect.includes('app')) {\n        router.push(redirect)\n     } else {\n        router.push('/dashboard')\n     }\n  } catch (error) {\n     console.error(\"Login failed\", error)\n     errorMsg.value = 'Invalid login credentials'\n  } finally {\n     loading.value = false\n  }\n}\n\nconst fillDemo = () => {\n   email.value = 'supplier@techsolutions.com'\n   password.value = '123456'\n}\n</script>\n\n<template>\n  <div class=\"flex min-h-screen flex-col items-center pt-20 bg-gray-50 pb-12\">\n    <!-- Header -->\n    <div class=\"w-full max-w-md mb-8 flex justify-between items-center px-4\">\n       <div class=\"flex items-center gap-2\">\n          <div class=\"h-8 w-8 flex items-center justify-center rounded-lg bg-indigo-600 text-white font-bold text-xl\">T</div>\n          <span class=\"font-bold text-gray-900 text-lg\">TenderFlow</span>\n       </div>\n    </div>\n\n    <!-- Login Card -->\n    <div class=\"w-full max-w-md bg-white rounded-xl shadow-sm border border-gray-100 p-8\">\n       <div class=\"text-center mb-8\">\n          <div class=\"inline-flex h-12 w-12 items-center justify-center rounded-xl bg-indigo-600 text-white mb-4 shadow-indigo-100 shadow-lg\">\n             <Lock class=\"h-6 w-6\" />\n          </div>\n          <h2 class=\"text-2xl font-bold text-gray-900\">Welcome Back</h2>\n          <p class=\"mt-2 text-sm text-gray-500\">Sign in to your vendor account to manage bids</p>\n       </div>\n       \n\n       <form @submit=\"handleLogin\" class=\"space-y-5\">\n          <div>\n             <label for=\"email\" class=\"block text-sm font-medium text-gray-900 mb-1\">Email Address</label>\n             <input id=\"email\" type=\"email\" v-model=\"email\" required class=\"block w-full rounded-lg border-0 py-2.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 bg-gray-50\" />\n          </div>\n\n          <div>\n             <div class=\"flex items-center justify-between mb-1\">\n                <label for=\"password\" class=\"block text-sm font-medium text-gray-900\">Password</label>\n                <a href=\"#\" class=\"text-sm font-semibold text-indigo-600 hover:text-indigo-500\">Forgot password?</a>\n             </div>\n             <input id=\"password\" type=\"password\" v-model=\"password\" required class=\"block w-full rounded-lg border-0 py-2.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 bg-gray-50\" />\n          </div>\n          \n          <div v-if=\"errorMsg\" class=\"text-red-500 text-sm text-center\">{{ errorMsg }}</div>\n\n          <button type=\"submit\" :disabled=\"loading\" class=\"flex w-full justify-center rounded-lg bg-indigo-600 px-3 py-2.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 transition-all hover:scale-[1.01] shadow-indigo-200\">\n             <span v-if=\"loading\">Signing in...</span>\n             <span v-else>Sign In</span>\n          </button>\n       </form>\n\n       <div class=\"mt-6 text-center text-sm text-gray-500\">\n          Don't have an account? \n          <router-link to=\"/register\" class=\"font-semibold text-indigo-600 hover:text-indigo-500\">Register as Vendor</router-link>\n       </div>\n    </div>\n  </div>\n</template>\n"],"names":["Lock","createLucideIcon","router","useRouter","authStore","useAuthStore","email","ref","password","loading","errorMsg","redirectIfLoggedIn","onMounted","watch","newVal","handleLogin","e","__async","user","redirect","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_unref","_cache","$event","_hoisted_5","_toDisplayString","_hoisted_9","_component_router_link"],"mappings":"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","x_google_ignoreList":[0]}