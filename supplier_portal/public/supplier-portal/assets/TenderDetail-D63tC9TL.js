var pe=Object.defineProperty,ve=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var K=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ee=(_,y,v)=>y in _?pe(_,y,{enumerable:!0,configurable:!0,writable:!0,value:v}):_[y]=v,P=(_,y)=>{for(var v in y||(y={}))be.call(y,v)&&ee(_,v,y[v]);if(K)for(var v of K(y))ye.call(y,v)&&ee(_,v,y[v]);return _},Q=(_,y)=>ve(_,xe(y));var D=(_,y,v)=>new Promise((w,B)=>{var R=S=>{try{q(v.next(S))}catch(L){B(L)}},H=S=>{try{q(v.throw(S))}catch(L){B(L)}},q=S=>S.done?w(S.value):Promise.resolve(S.value).then(R,H);q((v=v.apply(_,y)).next())});import{c as C,m as M,y as I,w as he,p as fe,z as _e,a as l,b as t,e as m,u,g as we,f,k as b,t as i,n as N,B as te,F,r as E,d as se,M as U,q as ke,v as De,x as Be,s as Se,T as Me,o as d,j as Te}from"./index-DCPhcw9F.js";import{t as T}from"./mosha-vue-toastify.es-6kWsKCL9.js";import{C as oe}from"./circle-alert-C_ycDi-h.js";import{C as Le}from"./calendar-f-tZvszQ.js";import{M as Ce}from"./map-pin-C0UIYFAH.js";import{C as Ne}from"./clock-RuiGBjmH.js";import{D as J}from"./download-B5CANocB.js";import{A as Fe}from"./arrow-right-BaK6iIjb.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=C("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=C("badge-check",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=C("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=C("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=C("hourglass",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=C("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=C("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=C("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),$e={class:"min-h-screen bg-gray-50 pb-12"},Pe={key:0,class:"flex items-center justify-center min-h-[60vh]"},He={key:1,class:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4"},Oe={key:2},Ve={class:"bg-white border-b border-gray-200"},ze={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},Qe={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},Ue={class:"flex flex-wrap gap-2 mb-3"},Je={class:"inline-flex items-center rounded-md bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-600"},Xe={class:"inline-flex items-center rounded-md bg-indigo-50 px-2.5 py-0.5 text-xs font-medium text-indigo-700 border border-indigo-100"},Ye={key:0,class:"inline-flex items-center rounded-md bg-orange-50 px-2.5 py-0.5 text-xs font-medium text-orange-700 border border-orange-100"},We={class:"text-2xl font-bold text-gray-900 mb-2"},Ze={class:"flex flex-wrap items-center gap-4 text-xs text-gray-500"},Ge={class:"flex items-center gap-1"},Ke={class:"flex items-center gap-1"},et={class:"flex items-center gap-1"},tt={class:"text-xs"},st={class:"flex items-center gap-1"},ot={class:"flex gap-2"},rt={class:"text-sm font-semibold"},at={class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},it={class:"p-2 text-gray-400 hover:text-gray-600 rounded-md hover:bg-gray-100 border border-gray-200 transition-colors"},nt={class:"flex gap-6 mt-8 border-b border-gray-100"},lt=["onClick"],dt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ct={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ut={class:"lg:col-span-2 space-y-6"},gt={key:0,class:"space-y-6"},mt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},pt=["innerHTML"],vt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xt={class:"p-4 bg-blue-50 rounded-lg border border-blue-100 flex items-center gap-3"},bt={class:"p-2 bg-blue-100 rounded-lg text-blue-600"},yt={class:"text-sm font-bold text-gray-900"},ht={class:"p-4 bg-green-50 rounded-lg border border-green-100 flex items-center gap-3"},ft={class:"p-2 bg-green-100 rounded-lg text-green-600"},_t={class:"text-sm font-bold text-gray-900"},wt={class:"p-4 bg-orange-50 rounded-lg border border-orange-100 flex items-center gap-3"},kt={class:"p-2 bg-orange-100 rounded-lg text-orange-600"},Dt={class:"text-sm font-bold text-gray-900"},Bt={class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},St=["innerHTML"],Mt={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Tt={class:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2"},Lt={class:"space-y-3"},Ct=["onClick"],Nt={class:"text-sm font-bold text-gray-900 group-hover:text-orange-600 transition-colors"},Ft={class:"text-xs text-gray-500 mt-1"},Rt={key:1,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},qt={class:"space-y-4"},At={key:0,class:"text-gray-500 italic"},jt={class:"flex-grow"},It={class:"text-sm font-semibold text-gray-900 block"},Et=["innerHTML"],$t={class:"mt-2 flex gap-4 text-xs font-medium text-gray-700 items-center"},Pt={class:"bg-white px-2 py-1 rounded border border-gray-200"},Ht={key:0,class:"bg-white px-2 py-1 rounded border border-gray-200"},Ot=["href"],Vt={key:2,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},zt={class:"space-y-3"},Qt={key:0,class:"text-gray-500 italic"},Ut={class:"flex items-center gap-4"},Jt={class:"p-2 bg-red-50 rounded-lg text-red-500"},Xt={class:"font-medium text-gray-900 group-hover:text-indigo-700"},Yt={class:"text-xs text-gray-500"},Wt=["href"],Zt={key:3,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm"},Gt={class:"relative pl-4"},Kt={key:0,class:"w-2.5 h-2.5 rounded-full bg-indigo-600"},es={class:"flex-grow pt-0.5"},ts={class:"text-sm font-bold text-gray-900"},ss={class:"text-xs text-gray-500 mt-1"},os={key:0,class:"text-xs font-medium text-green-600 bg-green-50 px-2 py-1 rounded self-start"},rs={class:"lg:col-span-1 space-y-6"},as={class:"bg-white rounded-xl border border-gray-200 px-6 py-6 shadow-sm relative overflow-hidden"},is={class:"grid grid-cols-2 gap-y-4 gap-x-2 text-sm mb-6"},ns={class:"font-semibold text-gray-900"},ls={class:"font-semibold text-gray-900"},ds={class:"font-semibold text-gray-900"},cs={class:"font-semibold text-gray-900"},us={class:"pt-4 border-t border-gray-100 mb-6"},gs={class:"flex items-center gap-2 text-xs text-red-600 mb-1 font-medium"},ms={class:"text-sm font-bold text-gray-900 mb-1"},ps={class:"text-xs text-gray-500"},vs={class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold py-2.5 rounded-lg shadow-sm transition-colors mb-3 flex items-center justify-center gap-2"},xs={class:"flex items-center gap-2"},bs=["href"],ys={key:0,class:"bg-white rounded-xl border border-gray-200 p-6 shadow-sm ring-1 ring-gray-200"},hs={class:"text-center py-6 bg-white rounded-xl border-2 border-green-500/20 mb-6 shadow-[0_0_15px_rgba(34,197,94,0.1)]"},fs={class:"text-3xl font-bold text-green-600 tracking-tight"},_s={key:0,class:"text-xs font-medium text-green-600 mt-1 flex items-center justify-center gap-1"},ws={class:"mb-4"},ks={class:"flex gap-2 mb-3"},Ds={class:"relative flex-grow"},Bs=["disabled"],Ss={key:0},Ms={class:"min-h-[20px] mb-3"},Ts={key:0,class:"text-[11px] text-red-600 font-bold px-1 flex items-center gap-1"},Ls=["disabled"],Cs={class:"mt-6"},Ns={key:0,class:"text-center py-4 text-xs text-gray-400 italic"},Fs={class:"flex flex-col"},Rs={class:"text-[10px] text-gray-400"},qs={class:"text-right"},As={key:0,class:"text-[10px] font-bold text-green-500 uppercase"},js={class:"bg-indigo-900 rounded-xl p-6 text-white text-center"},Is={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4"},Es={class:"relative bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 text-left"},$s={class:"flex items-center gap-3 mb-6"},Ps={class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600"},Hs={class:"space-y-4"},Os={class:"text-sm font-semibold text-gray-800"},Vs=["innerHTML"],Ks={__name:"TenderDetail",setup(_){const y=_e(),v=we(),w=M(!0),B=M(!1);M([]);const R=M([]),H=(o,e)=>D(this,null,function*(){try{const n="/api/method/supplier_portal.api.get_similar_tenders?"+new URLSearchParams({category:o,exclude_id:e}),g=yield(yield L(n)).json();g.message&&(R.value=g.message.map(x=>({id:x.id,title:x.title,budget:parseFloat(x.budget)||0,deadline:x.deadline?new Date(x.deadline).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"})))}catch(n){console.error("Error fetching similar tenders:",n)}}),q=o=>D(this,null,function*(){try{const g=((yield(yield fetch("/api/method/supplier_portal.api.get_saved_tenders")).json()).message||[]).find(x=>x.id===o);g&&(B.value=!0,a.value&&(a.value.saved_record_name=g.saved_id))}catch(e){console.error("Error checking saved status:",e)}}),S=()=>D(this,null,function*(){try{const e=yield(yield fetch("/api/method/supplier_portal.api.get_csrf_token",{credentials:"include",cache:"no-store"})).json();if(e.message)return window.csrf_token=e.message,e.message}catch(o){console.error("Failed to refresh CSRF token",o)}return window.csrf_token}),L=(n,...s)=>D(this,[n,...s],function*(o,e={}){let g=window.csrf_token;(!g||g==="None")&&(g=yield S());const x=P({"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-Frappe-CSRF-Token":g},e.headers||{}),r=Q(P({},e),{headers:x,credentials:"include"});let c=yield fetch(o,r);if(!c.ok)try{const j=yield c.clone().json();(j.exc_type==="CSRFTokenError"||c.status===403||c.status===417||c.status===400)&&(console.warn("CSRF Error, retrying...",j.exc_type),yield new Promise(z=>setTimeout(z,500)),g=yield S(),x["X-Frappe-CSRF-Token"]=g,c=yield fetch(o,Q(P({},r),{headers:x})))}catch(k){}return c}),ae=()=>D(this,null,function*(){var o;if(a.value){if(B.value){try{const e=yield L("/api/method/supplier_portal.api.delete_saved_tender",{method:"POST",body:JSON.stringify({saved_id:a.value.saved_record_name})}),n=yield e.json();e.ok&&((o=n.message)==null?void 0:o.status)==="success"?(B.value=!1,T("Removed from saved list",{type:"info"})):(console.error("Delete failed:",n),T("Failed to remove tender",{type:"danger"}))}catch(e){console.error("Delete error:",e)}return}try{const e=yield L("/api/method/supplier_portal.api.save_tender",{method:"POST",body:JSON.stringify({rfq_id:a.value.id})}),n=yield e.json();e.ok?(B.value=!0,n.message&&n.message.name?a.value.saved_record_name=n.message.name:yield q(a.value.id),T("Tender saved successfully",{type:"success"})):(console.error("Save failed:",n),T(n.message||"Failed to save tender",{type:"danger"}))}catch(e){console.error("Save error:",e)}}}),ie=()=>{v.push("/queries")},a=M(null),$=M(!1),Y=o=>D(this,null,function*(){w.value=!0,a.value=null;try{const s=(yield(yield fetch("/api/method/supplier_portal.api.get_tender_details?"+new URLSearchParams({name:o}),{credentials:"include"})).json()).message;if(!s)throw new Error("No data returned");a.value={id:s.name,title:s.title,publishedDate:s.publish_date?new Date(s.publish_date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",location:s.billing_address,category:s.category,status:s.status,liveBidding:s.enable_live_bidding,description:s.description,quantity:s.total_quantity,bidsReceived:s.bidsReceived||0,estBudget:parseFloat(s.custom_total_budget_||s.total_budget)||0,deadline:s.submission_date,department:s.department,currentLowestBid:parseFloat(s.custom_total_budget_||s.total_budget)||0,minBidDecrement:s.min_bid_decrement,emdRequired:s.emd_amount,contactDisplay:s.custom_contact_display||"Contact details not provided",addressDisplay:s.custom_address_display||"Address details not provided",termsData:s.terms||"No terms and conditions provided.",autoExtension:s.auto_extension_limit?s.auto_extension_limit+" mins":"0 mins",deliveryDate:s.schedule_date||"N/A",items:s.items||[],documents:(s.documents||[]).map(g=>({name:g.file_name,url:g.file_url,size:g.file_size+" bytes"})),timeline:[{stage:"Published",date:s.publish_date,completed:!!s.publish_date},{stage:"Bid Submission Starts",date:s.submission_start_date,completed:new Date>new Date(s.submission_start_date)},{stage:"Submission Ends",date:s.submission_date,completed:new Date>new Date(s.submission_date)},{stage:"Result Declaration",date:s.result_date,completed:!1},{stage:"Delivery Expected",date:s.schedule_date,completed:!1}].filter(g=>g.date),similarTenders:[]},s.category&&(yield H(s.category,s.name))}catch(e){console.error("Failed to fetch tender details:",e)}finally{w.value=!1}}),ne=I(()=>{var e;const o=((e=a.value)==null?void 0:e.estBudget)||0;return o>0?`₹${o.toLocaleString("en-IN")}`:"N/A"}),A=M("Overview"),le=["Overview","Specifications","Documents","Timeline"],h=M(),p=M([]),W=M({quick_bid_percent:0}),de=()=>D(this,null,function*(){try{const e=yield(yield fetch("/api/method/supplier_portal.api.get_portal_settings")).json();e.message&&(W.value=e.message)}catch(o){console.error("Failed to fetch settings",o)}}),ce=I(()=>{var o;if(p.value&&p.value.length>0){const e=Math.min(...p.value.map(n=>n.total||0));return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e)}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(((o=a.value)==null?void 0:o.currentLowestBid)||0)}),Z=o=>D(this,null,function*(){try{const n=yield(yield fetch(`/api/method/supplier_portal.api.get_recent_bid_activity?rfq_id=${o}`)).json();n&&n.message&&Array.isArray(n.message)?p.value=n.message.map(s=>({supplier:s.supplier,total:parseFloat(s.total)||0,time:ue(s.creation)})):p.value=[]}catch(e){console.error("Fetch error:",e),p.value=[]}}),ue=o=>{const e=Math.floor((new Date-new Date(o))/6e4);return e<1?"now":e<60?`${e}m ago`:`${Math.floor(e/60)}h ago`},ge=()=>D(this,null,function*(){var s,g,x,r,c;if(!((s=a.value)!=null&&s.liveBidding)){T("Bidding is not currently active for this tender",{type:"danger"});return}if(!h.value||h.value<=0){T("Please enter a valid bid amount",{type:"warning"});return}const o=p.value.length>0?Math.min(...p.value.map(k=>k.total)):((g=a.value)==null?void 0:g.currentLowestBid)||0,e=((x=a.value)==null?void 0:x.minBidDecrement)||0,n=o-e;if(console.log("Current L1:",o,"Min Decrement:",e,"Max Allowed:",n),h.value>n){T(`Invalid Bid: You must bid ₹${n.toLocaleString()} or lower (Min drop of ₹${e.toLocaleString()} required).`,{type:"danger",timeout:5e3,showIcon:!0});return}try{w.value=!0;const k=yield L("/api/method/supplier_portal.api.place_supplier_bid",{method:"POST",body:JSON.stringify({rfq_id:a.value.id,amount:h.value})}),j=yield k.json();if(k.ok&&((r=j.message)==null?void 0:r.status)==="success")T(`Bid of ₹${h.value.toLocaleString("en-IN")} placed successfully!`,{type:"success"}),yield Z(a.value.id),yield Y(a.value.id),h.value=null;else{const z=((c=j.message)==null?void 0:c.message)||j._server_messages||"Failed to place bid";T(z,{type:"danger"})}}catch(k){console.error("Bid submission error:",k),T("An error occurred while placing the bid",{type:"danger"})}finally{w.value=!1}}),me=I(()=>{var o;return p.value.length>0?Math.min(...p.value.map(e=>e.total)):((o=a.value)==null?void 0:o.estBudget)||0}),O=I(()=>{var n;const o=me.value,e=((n=a.value)==null?void 0:n.minBidDecrement)||0;return p.value.length===0?o>0?o:999999999:o-e});I(()=>{var n,s;const o=((n=a.value)==null?void 0:n.total_budget)||0,e=p.value.length>0?Math.min(...p.value.map(g=>g.total)):((s=a.value)==null?void 0:s.currentLowestBid)||0;return o<=0?0:o-e});const V=I(()=>{var r,c;const o=p.value.length>0?Math.min(...p.value.map(k=>k.total)):((r=a.value)==null?void 0:r.estBudget)||0;if(o<=0)return 0;let e=W.value.live_bidding_quick_entry_percent||0;e>100&&(e=e/1e3);const n=o*(e/100);if(p.value.length===0)return Math.floor(o-n);const s=((c=a.value)==null?void 0:c.minBidDecrement)||0,g=Math.max(n,s),x=o-g;return x>0?Math.floor(x):0}),G=o=>D(this,null,function*(){if(o){w.value=!0,p.value=[];try{yield Promise.all([Y(o),q(o),Z(o),de()])}catch(e){console.error("Error refreshing data:",e)}finally{w.value=!1}}});return he(()=>y.params.id,o=>{o&&(G(o),window.scrollTo({top:0,behavior:"smooth"}))}),fe(()=>D(this,null,function*(){y.params.id&&(yield G(y.params.id))})),(o,e)=>{var s,g,x;const n=Be("ArrowDown");return d(),l("div",$e,[w.value?(d(),l("div",Pe,[...e[7]||(e[7]=[t("div",{class:"flex flex-col items-center gap-4"},[t("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600"}),t("p",{class:"text-gray-500 text-sm font-medium"},"Loading tender details...")],-1)])])):a.value?(d(),l("div",Oe,[t("div",Ve,[t("div",ze,[t("button",{onClick:e[1]||(e[1]=r=>u(v).back()),class:"flex items-center text-sm text-gray-500 hover:text-gray-900 mb-4 transition-colors"},[m(u(Re),{class:"w-4 h-4 mr-1"}),e[10]||(e[10]=f(" Back to Tenders ",-1))]),t("div",Qe,[t("div",null,[t("div",Ue,[t("span",Je,i(a.value.category),1),t("span",Xe,i(a.value.status),1),a.value.liveBidding?(d(),l("span",Ye,[...e[11]||(e[11]=[t("span",{class:"relative flex h-2 w-2 mr-1.5"},[t("span",{class:"animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"}),t("span",{class:"relative inline-flex rounded-full h-2 w-2 bg-orange-500"})],-1),f(" Live Bidding ",-1)])])):b("",!0)]),t("h1",We,i(a.value.title),1),t("div",Ze,[t("span",Ge,[m(u(X),{class:"w-3.5 h-3.5"}),f(" "+i(a.value.id),1)]),t("span",Ke,[m(u(Le),{class:"w-3.5 h-3.5"}),f(" Published: "+i(a.value.publishedDate),1)]),t("span",et,[m(u(Ce),{class:"w-3.5 h-3.5"}),t("span",tt,i((s=a.value.location)==null?void 0:s.replace(/<br\s*\/?>/gi,", ").replace(/,\s*,/g,", ").replace(/,\s*$/,"")),1)]),t("span",st,[m(u(Ae),{class:"w-3.5 h-3.5"}),f(" "+i(a.value.views||0)+" views",1)])])]),t("div",ot,[t("button",{onClick:ae,class:N(["flex items-center gap-1.5 px-3 py-2 rounded-md border transition-all duration-200",B.value?"text-indigo-600 bg-indigo-50 border-indigo-200 shadow-sm":"text-slate-500 bg-white border-gray-200 hover:text-indigo-600 hover:border-indigo-100 hover:bg-gray-50"])},[m(u(te),{class:"w-5 h-5 transition-transform duration-200 active:scale-90",fill:B.value?"currentColor":"none"},null,8,["fill"]),t("span",rt,i(B.value?"Saved":"Save"),1)],2),t("button",at,[m(u(Ee),{class:"w-4 h-4"})]),t("button",it,[m(u(Ie),{class:"w-4 h-4"})])])]),t("div",nt,[(d(),l(F,null,E(le,r=>t("button",{key:r,onClick:c=>A.value=r,class:N(["pb-3 text-sm font-medium border-b-2 transition-colors",A.value===r?"border-indigo-600 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"])},i(r),11,lt)),64))])])]),t("div",dt,[t("div",ct,[t("div",ut,[A.value==="Overview"?(d(),l("div",gt,[t("div",mt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Description",-1)),t("div",{class:"text-sm text-gray-600 leading-relaxed mb-8",innerHTML:a.value.description||"No description provided."},null,8,pt),t("div",vt,[t("div",xt,[t("div",bt,[m(u(re),{class:"w-5 h-5"})]),t("div",null,[e[12]||(e[12]=t("div",{class:"text-xs text-blue-600 font-medium mb-0.5"},"Min Bid Decrement",-1)),t("div",yt," ₹"+i(((g=a.value.minBidDecrement)==null?void 0:g.toLocaleString("en-IN"))||0),1)])]),t("div",ht,[t("div",ft,[m(u(qe),{class:"w-5 h-5"})]),t("div",null,[e[13]||(e[13]=t("div",{class:"text-xs text-green-600 font-medium mb-0.5"},"EMD Required",-1)),t("div",_t," ₹"+i(((x=a.value.emdRequired)==null?void 0:x.toLocaleString("en-IN"))||0),1)])]),t("div",wt,[t("div",kt,[m(u(je),{class:"w-5 h-5"})]),t("div",null,[e[14]||(e[14]=t("div",{class:"text-xs text-orange-600 font-medium mb-0.5"},"Auto Extension",-1)),t("div",Dt,i(a.value.autoExtension||"0 mins"),1)])])])]),t("div",Bt,[e[16]||(e[16]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Terms & Conditions",-1)),t("div",{class:"prose prose-sm max-w-none text-gray-600 leading-relaxed",innerHTML:a.value.termsData},null,8,St)]),R.value&&R.value.length>0?(d(),l("div",Mt,[t("h3",Tt,[m(u(te),{class:"w-4 h-4 text-gray-400"}),e[17]||(e[17]=f(" Similar Tenders ",-1))]),t("div",Lt,[(d(!0),l(F,null,E(R.value,r=>(d(),l("div",{key:r.id,onClick:c=>u(v).push(`/tenders/${r.id}`),class:"flex items-center justify-between p-4 rounded-lg border border-gray-100 hover:border-orange-200 hover:bg-orange-50/30 transition-all cursor-pointer group"},[t("div",null,[t("div",Nt,i(r.title),1),t("div",Ft," Budget: ₹"+i(r.budget.toLocaleString("en-IN"))+" • Deadline: "+i(r.deadline),1)]),m(u(Fe),{class:"w-4 h-4 text-gray-400 group-hover:text-orange-600 transform group-hover:translate-x-1 transition-all"})],8,Ct))),128))])])):b("",!0)])):b("",!0),A.value==="Specifications"?(d(),l("div",Rt,[e[19]||(e[19]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Technical Specifications",-1)),t("div",qt,[a.value.items.length===0?(d(),l("div",At,"No items specified.")):b("",!0),(d(!0),l(F,null,E(a.value.items,(r,c)=>(d(),l("div",{key:c,class:"p-4 bg-gray-50 rounded-lg border border-gray-100 flex items-start gap-3"},[m(u(X),{class:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"}),t("div",jt,[t("span",It,i(r.item_name)+" ("+i(r.item_code)+")",1),r.description?(d(),l("div",{key:0,class:"text-xs text-gray-500 mt-1",innerHTML:r.description},null,8,Et)):b("",!0),t("div",$t,[t("span",Pt,"Qty: "+i(r.qty)+" "+i(r.uom),1),r.budget?(d(),l("span",Ht,"Budget Rate: ₹"+i(r.budget),1)):b("",!0),r.attach_boq?(d(),l("a",{key:1,href:r.attach_boq,target:"_blank",class:"flex items-center gap-1 text-indigo-600 hover:text-indigo-800 hover:underline"},[m(u(J),{class:"w-3 h-3"}),e[18]||(e[18]=f(" Download BOQ ",-1))],8,Ot)):b("",!0)])])]))),128))]),e[20]||(e[20]=se('<div class="mt-8"><h3 class="text-lg font-semibold text-gray-900 mb-4">Delivery Requirements</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Location</div><div class="font-medium text-gray-900">Delhi NCR</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Expected Delivery Date</div><div class="font-medium text-gray-900">15 March 2024</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Delivery Terms</div><div class="font-medium text-gray-900">FOR Destination</div></div><div class="p-4 border border-gray-200 rounded-lg"><div class="text-xs text-gray-500 mb-1">Inspection</div><div class="font-medium text-gray-900">Before Dispatch + At Site</div></div></div></div>',1))])):b("",!0),A.value==="Documents"?(d(),l("div",Vt,[e[21]||(e[21]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Documents",-1)),t("div",zt,[!a.value.documents||a.value.documents.length===0?(d(),l("div",Qt,"No documents attached.")):b("",!0),(d(!0),l(F,null,E(a.value.documents,(r,c)=>(d(),l("div",{key:c,class:"flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all group"},[t("div",Ut,[t("div",Jt,[m(u(Te),{class:"w-6 h-6"})]),t("div",null,[t("div",Xt,i(r.name),1),t("div",Yt,i(r.size),1)])]),t("a",{href:r.url,target:"_blank",class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-white rounded-full transition-colors shadow-sm"},[m(u(J),{class:"w-4 h-4"})],8,Wt)]))),128))])])):b("",!0),A.value==="Timeline"?(d(),l("div",Zt,[e[23]||(e[23]=t("h3",{class:"text-lg font-semibold text-gray-900 mb-6"},"Tender Timeline",-1)),t("div",Gt,[e[22]||(e[22]=t("div",{class:"absolute left-[27px] top-4 bottom-4 w-0.5 bg-gray-200"},null,-1)),(d(!0),l(F,null,E(a.value.timeline,(r,c)=>(d(),l("div",{key:c,class:"relative flex gap-6 mb-8 last:mb-0"},[t("div",{class:N(["relative z-10 flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center bg-white",r.completed?"border-indigo-600 bg-indigo-50":"border-gray-300"])},[r.completed?(d(),l("div",Kt)):b("",!0)],2),t("div",es,[t("h4",ts,i(r.stage),1),t("p",ss,i(r.date),1)]),r.completed?(d(),l("div",os," Completed ")):b("",!0)]))),128))])])):b("",!0)]),t("div",rs,[t("div",as,[e[31]||(e[31]=t("h3",{class:"text-sm font-bold text-gray-900 mb-4 flex items-center gap-2"},"Tender Summary",-1)),t("div",is,[t("div",null,[e[24]||(e[24]=t("div",{class:"text-xs text-gray-500 mb-0.5"},"Quantity",-1)),t("div",ns,i(a.value.quantity),1)]),t("div",null,[e[25]||(e[25]=t("div",{class:"text-xs text-gray-500 mb-0.5"},"Bids Received",-1)),t("div",ls,i(a.value.bidsReceived),1)]),t("div",null,[e[26]||(e[26]=t("div",{class:"text-xs text-gray-500 mb-0.5"},"Est. Budget",-1)),t("div",ds,i(ne.value),1)]),t("div",null,[e[27]||(e[27]=t("div",{class:"text-xs text-gray-500 mb-0.5"},"Delivery Date",-1)),t("div",cs,i(a.value.deliveryDate),1)])]),t("div",us,[t("div",gs,[m(u(Ne),{class:"w-3.5 h-3.5"}),e[28]||(e[28]=f(" Deadline ",-1))]),t("div",ms,i(a.value.deadline),1),t("div",ps,"Department: "+i(a.value.department),1)]),t("button",vs,[m(u(X),{class:"w-4 h-4"}),e[29]||(e[29]=f(" Submit Your Bid ",-1))]),t("div",xs,[t("a",{href:o.mainBoqUrl||"#",target:"_blank",class:"flex-grow bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 text-sm font-semibold py-2.5 rounded-lg transition-colors flex items-center justify-center gap-2 cursor-pointer no-underline"},[m(u(J),{class:"w-4 h-4 text-gray-500"}),e[30]||(e[30]=f(" Download BOQ ",-1))],8,bs),t("button",{onClick:ie,class:"p-2.5 bg-white border border-gray-200 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors shadow-sm",title:"View Queries"},[m(u(U),{class:"w-5 h-5"})])])]),a.value.liveBidding?(d(),l("div",ys,[e[36]||(e[36]=se('<div class="flex items-center justify-between mb-4"><div class="flex items-center gap-2 px-2.5 py-1 bg-red-50 rounded-full border border-red-100"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-red-500"></span></span><span class="text-[10px] font-bold text-red-600 uppercase tracking-wider">Live Bidding Active</span></div><div class="text-[10px] text-gray-400 font-medium italic"> Updated 0s ago </div></div>',1)),t("div",hs,[e[32]||(e[32]=t("div",{class:"text-xs text-gray-500 font-medium mb-1 uppercase tracking-wider"},"Current Lowest Bid",-1)),t("div",fs,i(ce.value),1),p.value.length>0?(d(),l("div",_s,[m(u(re),{class:"w-3 h-3"}),f(" ₹"+i((a.value.estBudget-Math.min(...p.value.map(r=>r.total))).toLocaleString("en-IN"))+" below budget ",1)])):b("",!0)]),t("div",ws,[e[34]||(e[34]=t("label",{class:"text-xs font-semibold text-gray-700 mb-2 block"},"Enter Your Bid Amount",-1)),t("div",ks,[t("div",Ds,[e[33]||(e[33]=t("span",{class:"absolute left-3 top-2.5 text-gray-400"},"₹",-1)),ke(t("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>h.value=r),type:"number",class:"w-full pl-7 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-400 focus:border-amber-400",placeholder:"Enter amount"},null,512),[[De,h.value]])]),t("button",{onClick:ge,disabled:!h.value||h.value<=0||w.value,class:N(["px-4 py-2 bg-orange-400 text-white rounded-lg font-medium transition-all flex items-center gap-2",!h.value||h.value<=0||w.value||h.value>O.value?"opacity-40 cursor-not-allowed pointer-events-none select-none":"opacity-100 hover:bg-orange-500 active:scale-95"])},[w.value?(d(),l("span",Ss,"Placing...")):(d(),l(F,{key:1},[f(" Bid ")],64))],10,Bs)]),t("div",Ms,[h.value>O.value?(d(),l("p",Ts,[m(u(oe),{class:"w-3 h-3"}),f(" Must be ₹"+i(O.value.toLocaleString("en-IN"))+" or less to qualify ",1)])):b("",!0)]),t("button",{onClick:e[3]||(e[3]=r=>h.value=V.value),disabled:V.value<=0,class:"w-full py-1.5 border border-gray-200 rounded-lg flex items-center justify-center gap-2 text-gray-700 hover:bg-gray-50 transition-colors text-sm disabled:opacity-50"},[m(n,{class:"w-4 h-4 text-gray-500"}),f(" Quick bid: ₹"+i(V.value.toLocaleString("en-IN")),1)],8,Ls)]),t("div",Cs,[e[35]||(e[35]=t("h4",{class:"text-xs font-bold text-gray-900 mb-4 uppercase tracking-wider"},"Recent Bid Activity",-1)),p.value.length===0?(d(),l("div",Ns," No bids placed yet. Be the first! ")):b("",!0),(d(!0),l(F,null,E(p.value,(r,c)=>(d(),l("div",{key:c,class:N(["flex items-center justify-between py-3 border-b border-gray-50 last:border-0",{"bg-green-50 -mx-2 px-3 rounded-lg shadow-sm":c===0}])},[t("div",Fs,[t("span",{class:N(["font-bold text-sm",c===0?"text-green-700":"text-gray-700"])},i(r.supplier),3),t("span",Rs,i(r.time||"Just now"),1)]),t("div",qs,[t("div",{class:N(["font-bold",c===0?"text-green-600":"text-gray-900"])}," ₹"+i(new Intl.NumberFormat("en-IN").format(r.total)),3),c===0?(d(),l("span",As,"Current L1")):b("",!0)])],2))),128))])])):b("",!0),t("div",js,[e[38]||(e[38]=t("h4",{class:"font-bold text-sm mb-2"},"Need Help?",-1)),e[39]||(e[39]=t("p",{class:"text-xs text-indigo-200 mb-4 leading-relaxed"},"Have questions about this tender? Contact our support team.",-1)),t("button",{onClick:e[4]||(e[4]=r=>$.value=!0),class:"w-full bg-white text-indigo-900 text-xs font-bold py-2 rounded-lg shadow-sm hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2"},[m(u(U),{class:"w-3.5 h-3.5"}),e[37]||(e[37]=f(" Contact Support ",-1))])]),m(Me,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-150 ease-in"},{default:Se(()=>{var r,c;return[$.value?(d(),l("div",Is,[t("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e[5]||(e[5]=k=>$.value=!1)}),t("div",Es,[t("div",$s,[t("div",Ps,[m(u(U),{class:"w-5 h-5"})]),e[40]||(e[40]=t("h3",{class:"text-lg font-bold text-gray-900"},"Support Details",-1))]),t("div",Hs,[t("div",null,[e[41]||(e[41]=t("label",{class:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest block mb-1"},"Contact Person",-1)),t("p",Os,i(((r=a.value)==null?void 0:r.contactDisplay)||"Not Provided"),1)]),t("div",null,[e[42]||(e[42]=t("label",{class:"text-[10px] font-bold text-indigo-600 uppercase tracking-widest block mb-1"},"Address",-1)),t("p",{class:"text-sm text-gray-600 leading-relaxed",innerHTML:((c=a.value)==null?void 0:c.addressDisplay)||"No address specified"},null,8,Vs)])]),t("button",{onClick:e[6]||(e[6]=k=>$.value=!1),class:"w-full mt-8 bg-indigo-600 hover:bg-indigo-700 text-white py-3 rounded-xl text-sm font-bold transition-all shadow-lg shadow-indigo-100"}," Close ")])])):b("",!0)]}),_:1})])])])])):(d(),l("div",He,[m(u(oe),{class:"w-12 h-12 text-red-500 mb-4"}),e[8]||(e[8]=t("h3",{class:"text-lg font-bold text-gray-900"},"Tender Not Found",-1)),e[9]||(e[9]=t("p",{class:"text-gray-500 mt-2 max-w-md"},"The tender you are looking for does not exist or you do not have permission to view it.",-1)),t("button",{onClick:e[0]||(e[0]=r=>u(v).push("/tenders")),class:"mt-6 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"},"Back to Tenders")]))])}}};export{Ks as default};
//# sourceMappingURL=TenderDetail-D63tC9TL.js.map
