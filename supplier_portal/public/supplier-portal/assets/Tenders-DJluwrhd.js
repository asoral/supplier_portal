var R=(d,g,h)=>new Promise((L,S)=>{var k=r=>{try{D(h.next(r))}catch(y){S(y)}},j=r=>{try{D(h.throw(r))}catch(y){S(y)}},D=r=>r.done?L(r.value):Promise.resolve(r.value).then(k,j);D((h=h.apply(d,g)).next())});import{c as O,y as $,x as ee,a as i,o as n,b as e,k as w,t as o,n as p,e as a,s as U,f as c,u,d as te,h as E,l as se,m as v,w as ne,p as oe,z as ie,B as re,A as le,C as ae,F as V,r as H,q as z,v as Q,D as de,X as F,g as ue}from"./index-BhR-nqhO.js";import{C as ge}from"./clock-D-eOqCgi.js";import{C as ce}from"./calendar-DeKltLsB.js";import{F as me}from"./funnel-BNWKmje_.js";import{S as X}from"./search-Dcqimjw_.js";import{C as xe}from"./circle-user-Ds3U2MJr.js";/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=O("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=O("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-vue-next v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=O("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]),fe={class:"p-6 flex-grow flex flex-col"},be={class:"mb-4 flex items-start justify-between"},he={class:"flex flex-wrap gap-2"},we={class:"inline-flex items-center rounded-md bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600"},ke={key:0,class:"inline-flex items-center rounded-md bg-orange-50 px-2 py-1 text-xs font-medium text-orange-700 ring-1 ring-inset ring-orange-600/20"},_e={class:"text-base font-semibold leading-6 text-gray-900 group-hover:text-indigo-600 transition-colors"},Ce={class:"mt-1 text-xs text-gray-500 font-mono"},Ae={class:"mt-3 line-clamp-3 text-sm leading-6 text-gray-600"},Se={class:"mt-auto pt-6 flex flex-wrap gap-y-3 gap-x-6 border-t border-gray-100"},De={class:"flex items-center text-sm font-semibold text-gray-900 min-w-[120px]"},Le={class:"flex items-center text-sm font-semibold text-gray-600 mt-2"},Be={key:0,class:"mt-4 pt-3 flex items-center justify-between border-t border-dashed border-gray-200"},$e={class:"mt-4 flex gap-2 z-20 relative"},je={__name:"TenderCard",props:{tender:{type:Object,required:!0},viewMode:{type:String,default:"grid"}},setup(d){const g=d,h=$(()=>g.tender.publishedDate?new Date(g.tender.publishedDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A"),L=$(()=>{if(!g.tender.deadline)return"No Date Set";const y=new Date(g.tender.deadline)-new Date;return`${Math.floor(y/(1e3*60*60))}h left`}),S=$(()=>parseInt(L.value)<0?"text-red-600 font-bold":"text-green-600"),k=$(()=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(g.tender.budget)),j=$(()=>{switch(g.tender.status){case"Active":return"bg-green-50 text-green-700 border-green-200";case"Closed":return"bg-red-50 text-red-700 border-red-200";case"Coming Soon":return"bg-yellow-50 text-yellow-700 border-yellow-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}});return(D,r)=>{const y=ee("router-link");return n(),i("div",{class:p(["group relative flex flex-col overflow-hidden rounded-lg border border-gray-200 bg-white transition-all hover:shadow-md",d.viewMode==="list"?"flex-row":""])},[e("div",fe,[e("div",be,[e("div",he,[e("span",we,o(d.tender.category),1),e("span",{class:p(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium border",j.value])},o(d.tender.status),3),d.tender.status==="Active"?(n(),i("span",ke," Live Bidding ")):w("",!0)])]),e("h3",_e,[a(y,{to:{name:"TenderDetail",params:{id:d.tender.id}}},{default:U(()=>[c(o(d.tender.title),1)]),_:1},8,["to"])]),e("p",Ce,o(d.tender.id),1),e("p",Ae,o(d.tender.description),1),e("div",Se,[e("div",De,[a(u(ve),{class:"mr-1.5 h-4 w-4 text-gray-400","aria-hidden":"true"}),c(" "+o(k.value),1)]),e("div",{class:p(["flex items-center text-sm font-medium min-w-[120px]",S.value])},[a(u(ge),{class:"mr-1.5 h-4 w-4 opacity-70","aria-hidden":"true"}),e("span",null,o(L.value),1)],2),e("div",Le,[a(u(ce),{class:"mr-2 h-4 w-4 text-indigo-500","aria-hidden":"true"}),e("span",null,o(h.value),1)])]),d.tender.liveBidding?(n(),i("div",Be,[...r[0]||(r[0]=[te('<div class="text-xs text-orange-600 font-medium flex items-center gap-1"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-orange-400 opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-orange-500"></span></span> Current Lowest Bid </div><div class="text-sm font-bold text-green-600">₹4,25,000</div>',2)])])):w("",!0),e("div",$e,[d.tender.liveBidding?(n(),E(y,{key:0,to:{name:"TenderDetail",params:{id:d.tender.id}},class:"flex-1 flex items-center justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 transition-colors text-center"},{default:U(()=>[...r[1]||(r[1]=[c(" View & Bid ",-1)])]),_:1},8,["to"])):(n(),E(y,{key:1,to:{name:"TenderDetail",params:{id:d.tender.id}},class:"flex-1 flex items-center justify-center rounded-md bg-indigo-50 px-3 py-2 text-sm font-semibold text-indigo-600 shadow-sm hover:bg-indigo-100 transition-colors text-center"},{default:U(()=>[...r[2]||(r[2]=[c(" View Details ",-1)])]),_:1},8,["to"]))])])],2)}}},Me={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8"},Fe={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8"},Ne={class:"mt-1 text-sm text-gray-500"},Te={class:"mt-4 md:mt-0 flex gap-3"},Re={class:"inline-flex items-center gap-2 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},Ve={class:"grid grid-cols-1 gap-x-8 gap-y-10 lg:grid-cols-4"},He={class:"hidden lg:block space-y-6"},Ie={class:"flex items-center justify-between"},Pe={class:"font-semibold text-gray-900 flex items-center gap-2"},Ue={class:"space-y-2"},ze=["onClick"],Ee={class:"flex items-center"},Oe={key:0,class:"w-1.5 h-1.5 rounded-full bg-white"},Ge={class:"text-xs text-gray-400"},Qe={class:"flex flex-wrap gap-2"},Xe=["onClick"],Ye={class:"flex flex-wrap gap-2"},Je=["onClick"],Ke={class:"flex items-center justify-between mb-2"},We={class:"text-xs text-indigo-600 font-medium"},Ze={class:"lg:col-span-3"},qe={class:"flex flex-col sm:flex-row gap-4 mb-6"},et={class:"relative flex-grow"},tt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},st={class:"flex items-center gap-2"},nt={class:"flex items-center rounded-md bg-white shadow-sm ring-1 ring-inset ring-gray-200"},ot={key:0,class:"flex items-center gap-2 mb-6 text-sm flex-wrap"},it={key:0,class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},rt={key:1,class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},lt={key:2,class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},at={key:3,class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},dt={key:4,class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-2 py-1 text-xs font-medium text-indigo-700 ring-1 ring-inset ring-indigo-700/10"},ut={class:"mb-4"},gt={class:"text-sm text-gray-500"},ct={key:0,class:"col-span-full py-20 text-center bg-white rounded-lg border border-gray-200"},mt={key:1,class:"col-span-full py-20 text-center bg-white rounded-lg border border-gray-200 border-dashed"},xt={class:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-gray-100 mb-4"},kt={__name:"Tenders",setup(d){const g=se(),h=ie(),L=ue(),S=v(!1),k=v(""),j=v(0),D=()=>R(this,null,function*(){if(g.isAuthenticated)try{const s=(yield(yield g.secureFetch("/api/method/supplier_portal.api.get_count_saved_tenders")).json()).message||[];j.value=s.length}catch(x){console.error("Error fetching saved count:",x)}}),r=()=>{L.push("/saved-tenders")},y=()=>R(this,null,function*(){I.value=!0,S.value=!1,yield g.logout(!1),L.push("/login?redirect="+h.fullPath)}),B=v("grid"),_=v(5e6),N=v("Deadline (Soonest)"),m=v("All"),C=v("All"),f=v("All"),A=v(!1),M=v([]),I=v(!0),G=()=>R(this,null,function*(){I.value=!0;try{const x=new URLSearchParams({limit:20,priority:f.value}),t=yield g.secureFetch("/api/method/supplier_portal.api.get_active_tenders?"+new URLSearchParams({limit:20}));if(!t.ok&&(t.status===403||t.status===401))throw S.value=!0,new Error("Session Expired");const b=(yield t.json()).message||[];M.value=b.map(l=>({id:l.name,title:l.custom_rfq_subject,description:l.custom_rfq_description?l.custom_rfq_description.replace(/<[^>]*>?/gm,""):"",category:l.custom_rfq_category,status:l.custom_bid_status,budget:l.custom_total_budget_,deadline:l.custom_bid_submission_last_date,publishedDate:l.custom_publish_date,priority:l.custom_priority,liveBidding:l.custom_bid_status==="Active"&&l.custom_enable_live_bidding}))}catch(x){console.error("Failed to load tenders:",x)}finally{I.value=!1}});ne(f,()=>{G()}),oe(()=>{G(),D(),h.query.category&&(m.value=h.query.category)});const Y=$(()=>{const x={};M.value.forEach(b=>{const l=b.category||"Uncategorized";x[l]=(x[l]||0)+1});const t=Object.keys(x).map(b=>({name:b,count:x[b]}));return[{name:"All",count:M.value.length},...t]}),J=["All","Active","Closing Soon","Closed"],K=["All","Urgent","High","Normal","Low"],T=$(()=>M.value.filter(t=>{const s=t.title.toLowerCase().includes(k.value.toLowerCase())||t.id.toLowerCase().includes(k.value.toLowerCase()),b=m.value==="All"||t.category===m.value,l=C.value==="All"||t.status===C.value,W=f.value==="All"||t.priority===f.value,Z=t.budget<=_.value,q=!A.value||t.liveBidding;return s&&b&&l&&W&&Z&&q}).sort((t,s)=>{switch(N.value){case"Deadline (Soonest)":return new Date(t.deadline)-new Date(s.deadline);case"Deadline (Latest)":return new Date(s.deadline)-new Date(t.deadline);case"Budget (Low to High)":return t.budget-s.budget;case"Budget (High to Low)":return s.budget-t.budget;case"Most Bids":return s.bids-t.bids;default:return s.id.localeCompare(t.id)}})),P=()=>{m.value="All",C.value="All",f.value="All",A.value=!1,k.value="",_.value=2e7,N.value="Deadline (Soonest)"};return(x,t)=>(n(),i("div",Me,[e("div",Fe,[e("div",null,[t[11]||(t[11]=e("h1",{class:"text-3xl font-bold tracking-tight text-gray-900"},"Active Tenders",-1)),e("p",Ne,o(T.value.length)+" active tenders • 1 closing soon",1)]),e("div",Te,[e("button",{onClick:r,class:"inline-flex items-center gap-2 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-700 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"},[a(u(re),{class:"h-4 w-4"}),c(" Saved ("+o(j.value)+") ",1)]),e("button",Re,[a(u(le),{class:"h-4 w-4"}),t[12]||(t[12]=c(" Set Alert ",-1))])])]),e("div",Ve,[e("div",He,[e("div",Ie,[e("h3",Pe,[a(u(me),{class:"h-4 w-4"}),t[13]||(t[13]=c(" Filters",-1))]),e("button",{onClick:ae(P,["prevent"]),class:"text-xs font-medium text-indigo-600 hover:text-indigo-500"},"Clear All")]),e("div",null,[t[14]||(t[14]=e("h4",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wider mb-3"},"Category",-1)),e("div",Ue,[(n(!0),i(V,null,H(Y.value,s=>(n(),i("div",{key:s.name,class:"flex items-center justify-between group cursor-pointer",onClick:b=>m.value=s.name},[e("div",Ee,[e("span",{class:p(["w-3 h-3 rounded-full border border-gray-300 mr-2 flex items-center justify-center transition-colors",{"border-indigo-600 bg-indigo-600":m.value===s.name}])},[m.value===s.name?(n(),i("span",Oe)):w("",!0)],2),e("span",{class:p(["text-sm text-gray-600 group-hover:text-gray-900",{"font-medium text-gray-900":m.value===s.name}])},o(s.name),3)]),e("span",Ge,"("+o(s.count)+")",1)],8,ze))),128))])]),t[20]||(t[20]=e("div",{class:"border-t border-gray-200 my-4"},null,-1)),e("div",null,[t[15]||(t[15]=e("h4",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wider mb-3"},"Status",-1)),e("div",Qe,[(n(),i(V,null,H(J,s=>e("button",{key:s,onClick:b=>C.value=s,class:p(["rounded-full px-3 py-1 text-xs font-medium border transition-colors",C.value===s?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-200 hover:border-gray-300"])},o(s),11,Xe)),64))])]),t[21]||(t[21]=e("div",{class:"border-t border-gray-200 my-4"},null,-1)),e("div",null,[t[16]||(t[16]=e("h4",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wider mb-3"},"Priority Level",-1)),e("div",Ye,[(n(),i(V,null,H(K,s=>e("button",{key:s,onClick:b=>f.value=s,class:p(["rounded-md px-3 py-1 text-xs font-medium border transition-colors",f.value===s?"bg-indigo-50 text-indigo-700 border-indigo-200":"bg-white text-gray-600 border-gray-200 hover:border-gray-300"])},o(s),11,Je)),64))])]),t[22]||(t[22]=e("div",{class:"border-t border-gray-200 my-4"},null,-1)),e("div",null,[e("div",Ke,[t[17]||(t[17]=e("h4",{class:"text-xs font-semibold text-gray-900 uppercase tracking-wider"},"Budget Range",-1)),e("span",We,"₹"+o((_.value/1e5).toFixed(1))+"L",1)]),z(e("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=s=>_.value=s),min:"100000",max:"20000000",step:"100000",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"},null,512),[[Q,_.value]]),t[18]||(t[18]=e("div",{class:"flex justify-between text-xs text-gray-400 mt-1"},[e("span",null,"₹1L"),e("span",null,"₹2Cr")],-1))]),t[23]||(t[23]=e("div",{class:"border-t border-gray-200 my-4"},null,-1)),e("div",{class:"flex items-center justify-between cursor-pointer",onClick:t[1]||(t[1]=s=>A.value=!A.value)},[t[19]||(t[19]=e("span",{class:"flex items-center gap-2 text-sm font-medium text-gray-900"},[e("span",{class:"flex h-2 w-2 rounded-full bg-orange-500"}),c(" Live Bidding Only ")],-1)),e("div",{class:p(["relative inline-flex h-5 w-9 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",A.value?"bg-indigo-600":"bg-gray-200"])},[e("span",{class:p(["pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",A.value?"translate-x-4":"translate-x-0"])},null,2)],2)])]),e("div",Ze,[e("div",qe,[e("div",et,[e("div",tt,[a(u(X),{class:"h-4 w-4 text-gray-400"})]),z(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>k.value=s),type:"text",class:"block w-full rounded-md border-0 py-2.5 pl-10 text-gray-900 ring-1 ring-inset ring-gray-200 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 shadow-sm",placeholder:"Search by tender ID, title, or keywords..."},null,512),[[Q,k.value]])]),e("div",st,[z(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>N.value=s),class:"block w-full rounded-md border-0 py-2 pl-3 pr-8 text-gray-900 ring-1 ring-inset ring-gray-200 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 shadow-sm"},[...t[24]||(t[24]=[e("option",null,"Deadline (Soonest)",-1),e("option",null,"Deadline (Latest)",-1),e("option",null,"Budget (High to Low)",-1),e("option",null,"Budget (Low to High)",-1),e("option",null,"Most Bids",-1),e("option",null,"Recently Added",-1)])],512),[[de,N.value]]),e("div",nt,[e("button",{onClick:t[4]||(t[4]=s=>B.value="grid"),class:p(["p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-50 rounded-l-md border-r border-gray-200",B.value==="grid"?"bg-gray-50 text-indigo-600":""])},[a(u(pe),{class:"h-4 w-4"})],2),e("button",{onClick:t[5]||(t[5]=s=>B.value="list"),class:p(["p-2 text-gray-500 hover:text-gray-900 hover:bg-gray-50 rounded-r-md",B.value==="list"?"bg-gray-50 text-indigo-600":""])},[a(u(ye),{class:"h-4 w-4"})],2)])])]),m.value!=="All"||C.value!=="All"||f.value!=="All"||_.value<2e7||A.value?(n(),i("div",ot,[t[26]||(t[26]=e("span",{class:"text-gray-500"},"Active filters:",-1)),m.value!=="All"?(n(),i("span",it,[c(o(m.value)+" ",1),e("button",{onClick:t[6]||(t[6]=s=>m.value="All"),class:"hover:text-indigo-900"},[a(u(F),{class:"h-3 w-3"})])])):w("",!0),C.value!=="All"?(n(),i("span",rt,[c(o(C.value)+" ",1),e("button",{onClick:t[7]||(t[7]=s=>C.value="All"),class:"hover:text-indigo-900"},[a(u(F),{class:"h-3 w-3"})])])):w("",!0),f.value!=="All"?(n(),i("span",lt,[c(o(f.value)+" ",1),e("button",{onClick:t[8]||(t[8]=s=>f.value="All"),class:"hover:text-indigo-900"},[a(u(F),{class:"h-3 w-3"})])])):w("",!0),_.value<2e7?(n(),i("span",at,[c(" < ₹"+o((_.value/1e5).toFixed(1))+"L ",1),e("button",{onClick:t[9]||(t[9]=s=>_.value=2e7),class:"hover:text-indigo-900"},[a(u(F),{class:"h-3 w-3"})])])):w("",!0),A.value?(n(),i("span",dt,[t[25]||(t[25]=c(" Live Bidding ",-1)),e("button",{onClick:t[10]||(t[10]=s=>A.value=!1),class:"hover:text-indigo-900"},[a(u(F),{class:"h-3 w-3"})])])):w("",!0),e("button",{onClick:P,class:"text-xs text-gray-500 hover:text-gray-900 underline"},"Clear all")])):w("",!0),e("div",ut,[e("p",gt,"Showing "+o(T.value.length)+" of "+o(M.value.length)+" tenders",1)]),e("div",{class:p(B.value==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-6":"flex flex-col gap-4")},[S.value?(n(),i("div",ct,[a(u(xe),{class:"mx-auto h-12 w-12 text-orange-500 mb-4"}),t[27]||(t[27]=e("h3",{class:"text-lg font-bold text-gray-900"},"Session Expired",-1)),t[28]||(t[28]=e("p",{class:"mt-1 text-sm text-gray-500 mb-6 max-w-md mx-auto"},"Your session has timed out. Please reconnect to continue viewing active tenders.",-1)),e("button",{onClick:y,class:"inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Reconnect Session ")])):T.value.length===0?(n(),i("div",mt,[e("div",xt,[a(u(X),{class:"h-6 w-6 text-gray-400"})]),t[29]||(t[29]=e("h3",{class:"mt-2 text-sm font-semibold text-gray-900"},"No tenders found",-1)),t[30]||(t[30]=e("p",{class:"mt-1 text-sm text-gray-500 mb-6"},"Try adjusting your search or filter criteria to find what you're looking for.",-1)),e("button",{onClick:P,class:"inline-flex items-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500"}," Clear All Filters ")])):w("",!0),(n(!0),i(V,null,H(T.value,s=>(n(),E(je,{key:s.id,tender:s,"view-mode":B.value},null,8,["tender","view-mode"]))),128))],2)])])]))}};export{kt as default};
//# sourceMappingURL=Tenders-DJluwrhd.js.map
